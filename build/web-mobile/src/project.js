window.__require=function t(e,n,i){function o(r,c){if(!n[r]){if(!e[r]){var a=r.split("/");if(a=a[a.length-1],!e[a]){var u="function"==typeof __require&&__require;if(!c&&u)return u(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var l=n[r]={exports:{}};e[r][0].call(l.exports,function(t){return o(e[r][1][t]||t)},l,l.exports,t,e,n,i)}return n[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<i.length;r++)o(i[r]);return o}({CAudio:[function(t,e,n){"use strict";cc._RF.push(e,"232c0/7U/pGL5sEqox0aXqB","CAudio");var i=t("GameFake").SoundType;cc.Class({extends:cc.Component,properties:{audioWelcome:{default:null,type:cc.AudioClip},audioDiscardStraight:{default:null,type:cc.AudioClip},audioDiscardFlush:{default:null,type:cc.AudioClip},audioDiscardCulu:{default:null,type:cc.AudioClip},soundDiscard:{default:null,type:cc.AudioClip},audioWin:{default:null,type:cc.AudioClip},soundCountDow:{default:null,type:cc.AudioClip}},ctor:function(){this.audioPool=[]},onLoad:function(){},start:function(){cc.log("play"),cc.audioEngine.getMaxAudioInstance();var t=cc.audioEngine.play(this.audioWelcome,!1,1);this.audioPool.push(t)},playAudio:function(t){switch(t){case i.FULL_HOUSE:cc.audioEngine.play(this.audioDiscardCulu,!1,1);break;case i.FLUSH:cc.audioEngine.play(this.audioDiscardFlush,!1,1);break;case i.STRAIGHT:cc.audioEngine.play(this.audioDiscardStraight,!1,1);break;case i.WELCOME:cc.audioEngine.play(this.audioWelcome,!1,1);break;case i.WIN:cc.audioEngine.play(this.audioWin,!1,1)}}}),cc._RF.pop()},{GameFake:"GameFake"}],CBtnDownload:[function(t,e,n){"use strict";cc._RF.push(e,"aa848opgmhMQKfD6xZOvgcV","CBtnDownload"),cc.Class({extends:cc.Component,properties:{},start:function(){},onTouch:function(){console.log("Touch Download"),FbPlayableAd&&FbPlayableAd.onCTAClick()}}),cc._RF.pop()},{}],CBtnStep1:[function(t,e,n){"use strict";cc._RF.push(e,"8d6d7ZBIxZHcYYuxM2WLEVS","CBtnStep1"),cc.Class({extends:cc.Component,properties:{btnStep2:cc.Button},start:function(){},onTouch:function(){console.log("touch step 1"),this.node.active=!1,this.btnStep2.node.active=!0}}),cc._RF.pop()},{}],CBtnStep2:[function(t,e,n){"use strict";cc._RF.push(e,"7a174h5XKVDDqPz6uctC+1/","CBtnStep2"),cc.Class({extends:cc.Component,properties:{btnStep3:cc.Button},onLoad:function(){this.node.active=!1},start:function(){},onTouch:function(){console.log("touch step 2"),this.node.active=!1,this.btnStep3.node.active=!0}}),cc._RF.pop()},{}],CBtnStep3:[function(t,e,n){"use strict";cc._RF.push(e,"bb4b83rgAhPLYZOZ/FJGXMT","CBtnStep3"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.active=!1},start:function(){},onTouch:function(){console.log("touch step 3"),t("PlayableAds").onCTAClick()}}),cc._RF.pop()},{PlayableAds:"PlayableAds"}],CCHplay:[function(t,e,n){"use strict";cc._RF.push(e,"1895cduJFZDs6rxI33vPPph","CCHplay"),cc.Class({extends:cc.Component,properties:{bgSearch:{default:null,type:cc.Sprite},iconSearch:{default:null,type:cc.Sprite},lbSearch:{default:null,type:cc.Label},btnPlayNow:{default:null,type:cc.Button}},ctor:function(){this._posSearch=null,this._posButton=null},onLoad:function(){this._posSearch=this.bgSearch.node.getPosition(),this._posButton=this.btnPlayNow.node.getPosition()},onEnable:function(){this.node.stopAllActions(),this.bgSearch.node.setPosition(this._posSearch.x,-480),this.btnPlayNow.node.setPosition(this._posButton.x,-480),this.iconSearch.node.scale=0;var t="Pusoy Dos Zingplay.",e=t.length,n="",i=0;this.lbSearch.string=n,this.bgSearch.node.runAction(cc.moveTo(.5,this._posSearch)),this.iconSearch.node.runAction(cc.sequence(cc.hide(),cc.delayTime(.7),cc.show(),cc.scaleTo(.5,1,1))),this.lbSearch.node.runAction(cc.sequence(cc.delayTime(1.5),cc.repeat(cc.sequence(cc.callFunc(function(e){n+=t[i++],e.getComponent(cc.Label).string=n}),cc.delayTime(.1)),e))),this.btnPlayNow.node.runAction(cc.sequence(cc.hide(),cc.delayTime(1.5),cc.show(),cc.moveTo(.5,this._posButton))),this.btnPlayNow.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(2),cc.rotateTo(.2,-2),cc.rotateTo(.2,4),cc.rotateTo(.2,-3),cc.rotateTo(.2,0),cc.delayTime(1),cc.jumpTo(1,this._posButton,20,3))))}}),cc._RF.pop()},{}],CCard:[function(t,e,n){"use strict";cc._RF.push(e,"34036kNa6RCAoMIlraaHio6","CCard");var i=t("Types"),o=i.Card;i.Rank,cc.Class({extends:cc.Component,properties:{point:cc.Label,suit:cc.Sprite,mainPic:cc.Sprite,cardBG:cc.Sprite,redTextColor:cc.Color.RED,blackTextColor:cc.Color.WHITE,texFrontBG:cc.SpriteFrame,texFaces:{default:[],type:cc.SpriteFrame},texAce:{default:[],type:cc.SpriteFrame},texSuitBig:{default:[],type:cc.SpriteFrame},texSuitSmall:{default:[],type:cc.SpriteFrame},layerSuggest:{default:null,type:cc.Node},index:{default:0,type:cc.Integer,visible:!1},isSelected:{default:!1,visible:!1},owner:{default:null,type:cc.Node,visible:!1},isDraging:{default:!0,visible:!1},card:{default:null,type:o,visible:!1}},setOwner:function(t){this.owner=t},onLoad:function(){this.layerSuggest.active=!1,this.card&&this.init(this.card),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouch,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouch,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouch,this)},onEmit:function(){console.log("onEmit card:"+this.card.toString())},onTouch:function(t){if(this.owner){var e=new cc.Event.EventCustom("card-touch",!0);e.setUserData({card:this,event:t}),this.node.dispatchEvent(e)}else console.log("not found owner's card:"+this.id)},start:function(){this.node.dispatchEvent(new cc.Event.EventCustom("cardtouch",!0))},setCard:function(t){this.card=t},init:function(t){this.suit.spriteFrame=this.texSuitSmall[t.suit],t.isRedSuit?this.point.node.color=this.redTextColor:this.point.node.color=this.blackTextColor,this.point.string=t.pointName,t.isAce?this.mainPic.spriteFrame=this.texAce[t.suit]:t.isFace?(this.mainPic.spriteFrame=this.texFaces[t.point-8],t.isRedSuit?this.mainPic.node.color=this.redTextColor:this.mainPic.node.color=cc.Color.WHITE):this.mainPic.spriteFrame=this.texSuitBig[t.suit]},setPositionCenter:function(t){this.node.setPosition(t.x-73,t.y-98)},setSuggest:function(t){this.layerSuggest.active=!t}});cc._RF.pop()},{Types:"Types"}],CCircleAvatar:[function(t,e,n){"use strict";cc._RF.push(e,"df8ceAeEYhFxZKP0qg+RXYg","CCircleAvatar"),cc.Class({extends:cc.Component,properties:{mask:cc.Mask,img:cc.Sprite},start:function(){},changeAvatar:function(t){this.img.spriteFrame=t}}),cc._RF.pop()},{}],CCoinEffect:[function(t,e,n){"use strict";cc._RF.push(e,"e0254gVyhVFYLBmsXD2D+hb","CCoinEffect");var i=t("CoinEffect");cc.Class({extends:cc.Component,properties:{running:{default:!1},collided:{default:!1}},ctor:function(){this.gravity=0,this.type=0,this.speedX=0,this.speedY=0,this.speedR=0,this.floorPosition=cc.Vec2(0,0),this.running=!1,this.collided=!1},onLoad:function(){this.gravity=i.Const.GRAVITY,this.type=i.Const.TYPE.RAIN,this.speedX=0,this.speedY=Math.random()*i.Const.RATE_SPEED_Y,this.speedR=i.Const.RATE_SPEED_R;var t=this.node.getParent();if(t){var e=Math.random()*t.width,n=t.height+this.node.height+Math.random()*i.Const.RATE_Position_Y;this.node.setPosition(e,n)}else this.node.setPosition(0,0);var o=Math.random()*(i.Const.MAX_SCALE-i.Const.MIN_SCALE)+i.Const.MIN_SCALE;this.node.setScale(o),this.node.angle=-360*Math.random(),this.node.active=!1},start:function(){},update:function(t){if(this.running){var e=this.node.opacity,n=this.node.angle,o=this.node.getPosition(),s=this.node.getContentSize();e+=1500*t,o.x+=this.speedX*t,o.y+=this.speedY*t,n+=this.speedR*t,this.speedY-=this.gravity*t;var r=this.node.scale;if(o.y<this.floorPosition.y&&!this.collided)this.speedY<0&&(o.y=this.floorPosition.y+.5*s.height*r,this.collided=!0,this.speedY=Math.abs(this.speedY)*(Math.random()*(i.Const.RATE_JUMP_BACK-.3)+.3),this.speedX=.4*this.speedX);else if(o.y-.5*s.height*r<this.floorPosition.y&&this.collided){o.y=this.floorPosition.y+.5*s.height*r,this.getComponent(cc.Animation).stop(),this.running=!1}this.node.opacity=e>255?255:e,this.node.angle=n,this.node.setPosition(o)}}}),cc._RF.pop()},{CoinEffect:"CoinEffect"}],CCoinFallEffect:[function(t,e,n){"use strict";cc._RF.push(e,"09afe1rejBB8JiJThfk1l/V","CCoinFallEffect");t("CCoinEffect");cc.Class({extends:cc.Component,properties:{coinPrefab:{default:null,type:cc.Prefab}},ctor:function(){this.listCoin=[],this.numOfCoin=150},onLoad:function(){for(var t=0;t<this.numOfCoin;t++){var e=cc.instantiate(this.coinPrefab),n=e.getComponent("CCoinEffect");n.active=!1,this.node.addChild(e),this.listCoin.push(n)}},start:function(){},onEnable:function(){setTimeout(function(){for(var t=this.listCoin.length,e=0;e<t;e++){var n=this.listCoin[e];n.node.active=!0,n.running=!0}}.bind(this),100)},update:function(t){}}),cc._RF.pop()},{CCoinEffect:"CCoinEffect"}],CEffectWin:[function(t,e,n){"use strict";cc._RF.push(e,"c3f96EHNXtD9KukPp20CQBY","CEffectWin"),cc.Class({extends:cc.Component,properties:{},ctor:function(){this.gameController=null},onLoad:function(){},onEnable:function(){this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){this.showNodeCHPlay()},this)))},showNodeCHPlay:function(){this.gameController.showNodeCHPlay()},start:function(){}}),cc._RF.pop()},{}],CLayerGame:[function(t,e,n){"use strict";cc._RF.push(e,"9fbfbH6inNCBbIvpP5ZqCUf","CLayerGame"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.on("cardtouch",this.onEmit)},onEmit:function(){console.log("onEmit LayerCard")},start:function(){}}),cc._RF.pop()},{}],CPlayer:[function(t,e,n){"use strict";cc._RF.push(e,"c90b5cwF5ZKgbNi6oY6LKVY","CPlayer");t("Types");var i=t("Utility"),o=cc.Class({extends:cc.Component,properties:{avatar:cc.Node,displayName:cc.Label,gold:cc.Label,spriteAvatar:{default:[],type:[cc.SpriteFrame]},layerCard:{default:null,type:cc.Node},imgPass:{default:null,type:cc.Node},progressBar:{default:null,type:cc.ProgressBar},headProgressBar:{default:null,type:cc.ParticleSystem},backCard:{default:null,type:cc.Sprite},lbNumCard:{default:null,type:cc.Label}},ctor:function(){this.player=null,this.gameController=null,this.cards=[],this._isMyTurn=!1,this._numCard=0},onLoad:function(){this.setMyTurn(this._isMyTurn),this.player?(this.displayName.string=this.player.name,this.gold.string=i.formatMoneyFull(this.player.gold),this._loadCards()):console.error("need load setPlayer info onLoad"),this.imgPass&&(this.imgPass.active=!1)},start:function(){},update:function(t){if(this._isMyTurn){var e=this.progressBar,n=e.progress;n>0&&(n-=.1*t),e.progress=n;var i=new cc.Vec2(0,70);i=i.rotate(2*n*3.14),this.headProgressBar.node.setPosition(i)}},setGameController:function(t){this.gameController=t},setPlayer:function(t){this.player=t,0!==this.player.index&&(this._numCard=11)},updateUI:function(){},_loadCards:function(){if(this.gameController){for(var t=this.player.cards,e=0;e<t.length;e++){var n=t[e],i=this.gameController.getNewCard(),o=i.getComponent("CCard");o.setCard(n),o.index=e,o.setOwner(this);var s=this.getPositionCard(o),r=this.getRotationCard(o);i.setPosition(s),i.angle=-r,this.layerCard.addChild(i),this.cards.push(i)}this.lbNumCard.string=this.getNumCard()}else console.error("don't have GameControler in Player, so can't create newCard")},setLayerCard:function(t){this.layerCard=t},onDiscard:function(t){if(this.setMyTurn(!1),null==this.layerCard)return console.error("you need add layerCard to player beforeDiscard"),[];var e=[];if(this.player&&0===this.player.index){for(var n=function(e){for(var n=0;n<t.length;n++)if(e.id===t[n].id)return!0;return!1},i=this.cards.length-1;i>=0;i--){n((c=(r=this.cards[i]).getComponent("CCard")).card)&&(e.unshift(r),this.cards.splice(i,1),this.player.cards.splice(i,1))}this._updatePosCards()}else{var o=this.node.getPosition();o.x+=this.backCard.node.getPosition().x;for(var s=0;s<t.length;s++){var r,c;(c=(r=this.gameController.getNewCard()).getComponent("CCard")).setCard(t[s]),r.angle=0,c.setPositionCenter(o),e.push(r),this.layerCard.addChild(r)}this._numCard-=t.length}return this.lbNumCard.string=this.getNumCard(),e},_updatePosCards:function(){if(console.log("_updatePosCards"),this.gameController)for(var t=this.cards,e=0;e<t.length;e++){var n=t[e],i=n.getComponent("CCard");i.index=e;var o=this.getPositionCard(i),s=this.getRotationCard(i);n.setPosition(o),n.angle=-s}else console.error("don't have GameControler in Player, so can't create newCard")},getNumCard:function(){return this.player?0!==this.player.index?this._numCard:this.player.cards.length:1},getRotationCard:function(t){var e=t.index;return this.getRotationVia(e)},getRotationVia:function(t){var e=this.getNumCard(),n=-60,i=(48-n)/(e-1);return i>12&&(i=12),(n+=(48-n-i*(e-1))/2)+i*t},getPositionCard:function(t){var e=t.index;return this.getPositionVia(e)},getPositionVia:function(t){var e=this.getNumCard(),n=-250,i=(250-n)/(e-1);return i>5&&(i=5),n+=(250-n-i*(e-1))/2,this.getCirclePos(new cc.Vec2(n+i*t,0))},getCirclePos:function(t){var e=t.x;return t.y=e*e*-.004-450,t},onPass:function(){this.setMyTurn(!1),this.imgPass&&(this.imgPass.active=!0,this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){this.imgPass.active=!1}.bind(this)))))},onTouchCard:function(t,e,n){switch(t.type){case cc.Node.EventType.TOUCH_START:break;case cc.Node.EventType.TOUCH_MOVE:e.isDraging=!0;var i=e.node.getParent().convertToNodeSpaceAR(t.getLocation());e.node.setPosition(i);break;case cc.Node.EventType.TOUCH_END:e.isDraging=!1,e.isSelected=!e.isSelected,e.node.setPosition(this.getPositionCard(e));break;case cc.Node.EventType.TOUCH_CANCEL:e.isDraging=!1,e.node.setPosition(this.getPositionCard(e))}},onEnterTurn:function(){0!==this.player.index&&(this.progressBar.progress=1,this.setMyTurn(!0))},setMyTurn:function(t){var e=1;console.log("come:"+e++),this._isMyTurn=t,console.log("come:"+e++),this.progressBar.node.active=t,console.log("come:"+e++);for(var n=this.cards.length,i=0;i<n;i++){this.cards[i].getComponent("CCard").setSuggest(!0)}console.log("come:"+e++),t?this.headProgressBar.resetSystem():this.headProgressBar.stopSystem(),console.log("come:"+e++)},onSuggestCard:function(t){for(var e=function(e){for(var n=t.length,i=0;i<n;i++)if(t[i].id===e.id)return!0;return!1},n=this.cards.length,i=0;i<n;i++){var o=this.cards[i].getComponent("CCard");o.setSuggest(e(o.card))}}});e.exports=o,cc._RF.pop()},{Types:"Types",Utility:"Utility"}],CProgressWaterAni:[function(t,e,n){"use strict";cc._RF.push(e,"2a9d8h1T4hAJrxWvcw6Gm89","CProgressWaterAni"),cc.Class({extends:cc.Component,properties:{sheepAnim:{default:null,type:cc.Animation}},onLoad:function(){},update:function(t){}}),cc._RF.pop()},{}],CSuggestGesture:[function(t,e,n){"use strict";cc._RF.push(e,"70d39mJjwVHm5ysckvxpTmp","CSuggestGesture"),cc.Class({extends:cc.Component,properties:{imgHand:{default:null,type:cc.Sprite},imgArrows:{default:[],type:[cc.Sprite]}},ctor:function(){this._posHand=null},onLoad:function(){this._posHand=this.imgHand.node.getPosition()},start:function(){},update:function(t){},onEnable:function(){this.imgHand.node.stopAllActions(),this.imgHand.node.setPosition(this._posHand),this.imgHand.node.runAction(cc.repeatForever(cc.sequence(cc.repeat(cc.sequence(cc.moveTo(0,this._posHand.x,this._posHand.y),cc.show(),cc.moveTo(.7,this._posHand.x,this._posHand.y+200),cc.delayTime(.3),cc.hide()),3),cc.hide(),cc.delayTime(3))));for(var t=this.imgArrows.length,e=0;e<t;e++){var n=this.imgArrows[e];n.node.stopAllActions(),n.node.runAction(cc.repeatForever(cc.sequence(cc.repeat(cc.sequence(cc.hide(),cc.delayTime(.125*e),cc.show(),cc.delayTime(.125*(t+1-e)),cc.hide()),6),cc.hide(),cc.delayTime(3))))}},onDisable:function(){}}),cc._RF.pop()},{}],CTable:[function(t,e,n){"use strict";cc._RF.push(e,"876d07NSSZBu4d949Frr7aA","CTable");var i=t("Types"),o=(i.Table,i.Card,t("Utility"));cc.Class({extends:cc.Component,properties:{lbPot:cc.Label,lbId:cc.Label,lbStake:cc.Label},ctor:function(){this.numCard=0,this.table=null},onLoad:function(){this.table?(this.lbPot.string=o.formatMoneyFull(this.table.pot),this.lbId.string=": "+o.formatMoney(this.table.id),this.lbStake.string=": "+o.formatMoney(this.table.stake)):console.error("need setTable before load")},start:function(){},setTable:function(t){this.table=t},getPositionCard:function(t){var e=t.index;return this.getPositionVia(e)},getPositionVia:function(t){var e=this.numCard>0?this.numCard:1,n=-250,i=(250-n)/(e-1);return i>50&&(i=50),n+=(250-n-i*(e-1))/2,new cc.Vec2(n+i*t-73,-98)},setNumCard:function(t){this.numCard=t}}),cc._RF.pop()},{Types:"Types",Utility:"Utility"}],CardUtils:[function(t,e,n){"use strict";cc._RF.push(e,"d0382uKtHJMSoEGLa7Q4Fz0","CardUtils"),cc._RF.pop()},{}],CoinEffect:[function(t,e,n){"use strict";cc._RF.push(e,"fb6b7QuI2dEGKS9rirjqIoi","CoinEffect"),e.exports={Const:{TYPE:{RAIN:0},GRAVITY:800,RATE_SPEED_X:300,RATE_SPEED_Y:-600,RATE_SPEED_R:250,RATE_Position_Y:400,MIN_SCALE:.67,MAX_SCALE:1,RATE_JUMP_BACK:.5}},cc._RF.pop()},{}],GameController:[function(t,e,n){"use strict";cc._RF.push(e,"0998cn5M2hCaJbNVw/MXvof","GameController");var i=t("PlayableState"),o=(t("PoolHandler"),t("CCard")),s=t("CTable"),r=t("CPlayer"),c=t("Types"),a=(c.Card,c.Table),u=c.Player,l=t("GameFake"),d=l.ActionType,f=l.GameFake,h=(l.SoundType,t("PlayableAds")),p=t("CAudio");t("Utility");cc.Class({extends:cc.Component,properties:{playableState:{default:null,type:i,serializable:!1,visible:!1},btnPlayNow:cc.Button,btnDump:cc.Button,btnPass:cc.Button,layerGame:cc.Node,layerAction:cc.Node,table:{default:null,type:cc.Node},players:{default:[],type:cc.Node},layerCard:{default:null,type:cc.Node},nodeSuggestGesture:{default:null,type:cc.Node},nodeCHPlay:{default:null,type:cc.Node},effectWin:{default:null,type:cc.Node},cardPrefab:{default:null,type:cc.Prefab},imgHands:{default:[],type:[cc.Sprite]},_poolCard:{default:null,type:cc.NodePool,visible:!1},_gameFake:{default:null,type:f,visible:!1}},ctor:function(){this.curIndex=-1,this.cardExpects=[],this.startPointTouch=null,this.zIndexCard=10,this.audio=null,this._posHands=[]},onLoad:function(){for(var t=0;t<this.imgHands.length;t++)this._posHands.push(this.imgHands[t].node.getPosition());this.nodeCHPlay.active=!1,this.effectWin.getComponent("CEffectWin").gameController=this,this.nodeSuggestGesture.active=!1,this.attachLayerCardToPlayer(),this.audio=this.node.getComponent(p),this.effectWin.active=!1,this._poolCard=new cc.NodePool(o),this._gameFake=new f;var e=this._gameFake.getDefaultInfo(),n=e.table,i=new a(n.id,n.stake,n.pot);this.table.getComponent(s).setTable(i);var c=n.dock,l=this.table.getComponent(s);l.setNumCard(c.length);for(var d=0;d<c.length;d++){var h=c[d],g=this._poolCard.get();g||(g=cc.instantiate(this.cardPrefab));var m=g.getComponent(o);m.setCard(h),m.index=d,m.setOwner(l);var y=l.getPositionCard(m);g.setPosition(y),this.layerCard.addChild(g)}console.log("onEnable players:"+this.players.length);for(var C=e.players,v=0;v<C.length;v++){var b=C[v],T=new u(b.index,b.displayName,b.gold,b.avatarIndex,b.cards);console.log("get palyer at:"+T.index);var P=this.players[T.index].getComponent(r);P.setGameController(this),P.setPlayer(T)}this.node.on("card-touch",this.onTouchCard,this);var S=this._gameFake.getAction(),_=S.time;this.curIndex=S.index,this.onEnterTurn(S.index),_>0&&this.scheduleOnce(function(){this.executeAction()}.bind(this),_)},start:function(){},onEnable:function(){console.log("onEnable players:"+this.players.length)},attachLayerCardToPlayer:function(){for(var t=this.players.length,e=0;e<t;e++){this.players[e].getComponent("CPlayer").setLayerCard(this.layerCard)}},onEnterTurn:function(t){console.log("onEnterTurn: "+t),this.players[t].getComponent(r).onEnterTurn()},executeAction:function(){this.nodeSuggestGesture.active=!1;var t=this._gameFake.getAction();console.log("executeAction:"+JSON.stringify(t));var e=t.index;switch(t.type){case d.PASS:this.onPassAt(e);break;case d.DISCARD:this.onDiscardAt(e,t.cards,t.group)}var n=t.sound;if(n&&this.audio.playAudio(n),t.isEnded){this.effectWin.active=!0;for(var i=0;i<this.imgHands.length;i++){this.imgHands[i].node.runAction(cc.moveBy(.5,0,-300))}}else{this.curIndex=t.next;var o=this._gameFake.next();if(o){this.onEnterTurn(o.index),console.log("actionNext:"+JSON.stringify(o));var s=o.time;s>0&&this.scheduleOnce(function(){var t=this._gameFake.getAction();if(0===t.index)return t.suggest&&(this.nodeSuggestGesture.active=!0,this.players[0].getComponent(r).onSuggestCard(t.cards)),void(this.cardExpects=t.cards);this.executeAction()}.bind(this),s)}}},onPassAt:function(t){console.log("onPassAt:"+t),this.players[t].getComponent(r).onPass()},onDiscardAt:function(t,e,n){console.log("onDiscardAt:"+t+"|"+JSON.stringify(e));var i=this.table.getComponent(s),c=this.players[t].getComponent(r).onDiscard(e),a=function(t){var e=t.getComponent(o),n=i.numCard,s=e.index,r=i.getPositionCard(e);t.runAction(cc.sequence(cc.spawn(cc.moveTo(.3,r),cc.rotateTo(.3,0),cc.sequence(cc.scaleTo(.15,1.2,1.2),cc.scaleTo(.15,.95,.95))),cc.spawn(cc.scaleTo(.15,1,1),cc.moveTo(.15,r.x+10*Math.random()*(s-(n-1)/2),r.y),cc.rotateTo(.15,(s-(n-1)/2)*Math.random()*4))))},u=c.length;i.setNumCard(u);for(var l=0;l<u;l++){var d=c[l],f=d.getComponent(o);f.index=l,f.owner=i,d.zIndex=++this.zIndexCard,a(d)}},onTouchCard:function(t){var e=t.getUserData(),n=e.card,i=n.owner;if(i instanceof s)console.log("passing card on table");else if(i instanceof r)if(this.isMyTurn())if(this.isTouchExpectCards(n.card))switch(e.event.type){case cc.Node.EventType.TOUCH_START:this.startPointTouch=e.event.getLocation();break;case cc.Node.EventType.TOUCH_MOVE:break;case cc.Node.EventType.TOUCH_END:case cc.Node.EventType.TOUCH_CANCEL:if(this.startPointTouch){var o=e.event.getLocation();o.y-this.startPointTouch.y>45?(this.executeAction(),cc.log("Discard on my turn")):cc.log("!!Discard on my turn")}cc.log("touch:"+JSON.stringify(this.startPointTouch)+"| "+JSON.stringify(o))}else cc.log("not expects card");else cc.log("not my turn")},onPlayNow:function(){console.log("onPlay path main"),h.onCTAClick()},onTouchDump:function(){console.log("touch Dump")},onTouchPass:function(){console.log("touch Pass")},getNewCard:function(){var t=this._poolCard.get();return t||(t=cc.instantiate(this.cardPrefab)),t},isMyTurn:function(){return 0===this.curIndex},isTouchExpectCards:function(t){for(var e=this.cardExpects.length,n=0;n<e;n++){if(this.cardExpects[n].id===t.id)return!0}return!1},showNodeCHPlay:function(){this.nodeCHPlay.active=!0}}),cc._RF.pop()},{CAudio:"CAudio",CCard:"CCard",CPlayer:"CPlayer",CTable:"CTable",GameFake:"GameFake",PlayableAds:"PlayableAds",PlayableState:"PlayableState",PoolHandler:"PoolHandler",Types:"Types",Utility:"Utility"}],GameFake:[function(t,e,n){"use strict";cc._RF.push(e,"af1531lKdNCeqAorUj+Evyi","GameFake");var i=t("Types"),o=i.Card,s=(i.Rank,i.Suit,{DISCARD:0,PASS:1}),r={WELCOME:0,STRAIGHT:1,FLUSH:2,FULL_HOUSE:3,WIN:4},c={NONE:0,STRAIGHT:1,FULL_HOUSE:2,FOUR_OF_KIND:3},a=[{index:1,type:s.DISCARD,cards:[o.from("7","\u2660"),o.from("8","\u2665"),o.from("9","\u2663"),o.from("10","\u2660"),o.from("J","\u2665")],group:c.STRAIGHT,time:1,sound:r.STRAIGHT,next:2},{index:2,type:s.DISCARD,cards:[o.from("5","\u2666"),o.from("9","\u2666"),o.from("J","\u2666"),o.from("K","\u2666"),o.from("A","\u2666")],group:c.FLUSH,time:1,sound:r.FLUSH,next:0},{index:0,type:s.DISCARD,cards:[o.from("3","\u2660"),o.from("3","\u2665"),o.from("4","\u2663"),o.from("4","\u2660"),o.from("4","\u2665")],group:c.FULL_HOUSE,time:1,sound:r.FULL_HOUSE,next:1,suggest:!0},{index:1,type:s.DISCARD,cards:[o.from("6","\u2660"),o.from("6","\u2665"),o.from("9","\u2663"),o.from("9","\u2660"),o.from("9","\u2665")],group:c.FULL_HOUSE,time:1,sound:r.FULL_HOUSE,next:2},{index:2,type:s.PASS,group:c.NONE,cards:[],time:1,next:0},{index:0,type:s.DISCARD,cards:[o.from("K","\u2660"),o.from("2","\u2663"),o.from("2","\u2660"),o.from("2","\u2665"),o.from("2","\u2666")],group:c.FOUR_OF_KIND,time:1,sound:r.WIN,isEnded:!0}],u={players:[{index:0,displayName:"You",gold:27e6,avatarIndex:0,cards:[o.from("K","\u2660"),o.from("2","\u2663"),o.from("3","\u2660"),o.from("3","\u2665"),o.from("4","\u2663"),o.from("4","\u2660"),o.from("4","\u2665"),o.from("2","\u2660"),o.from("2","\u2665"),o.from("2","\u2666")]},{index:1,displayName:"Maria",gold:47e6,avatarIndex:1,cards:[]},{index:2,displayName:"Michelle",gold:58e6,avatarIndex:2,cards:[]}],table:{id:456,stake:1e7,pot:4e7,dock:[o.from("Q","\u2666"),o.from("K","\u2663"),o.from("A","\u2660")]}};function l(){this.curIndex=0}l.prototype.reset=function(){this.curIndex=0},l.prototype.next=function(){return this.curIndex++,this.getAction()},l.prototype.getAction=function(){return a[this.curIndex]},l.prototype.getDefaultInfo=function(){return u},e.exports={GameFake:l,ActionType:s,SoundType:r},cc._RF.pop()},{Types:"Types"}],Game:[function(t,e,n){"use strict";cc._RF.push(e,"0973a4zPWhAZpuFLPEljN0e","Game"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],PlayableAds:[function(t,e,n){"use strict";cc._RF.push(e,"ce239sy/55Ox5FRnSgYmiSY","PlayableAds"),e.exports={onCTAClick:function(){try{FbPlayableAd.onCTAClick(),console.log("onCTAClick finish")}catch(t){console.log("onCTAClick redirect"),!0===confirm("Not playableAds, open store?")&&(window.location.href="https://play.google.com/store/apps/details?id=com.rummy.pusoy.dos")}}},cc._RF.pop()},{}],PlayableState:[function(t,e,n){"use strict";cc._RF.push(e,"d7e39F4OClL1IwzfB5UPkvI","PlayableState");var i=t("state-machine"),o=t("state-machine-visualize"),s=cc.Enum({PLAY:"play",ACTION1:"action1",ACTION2:"action2",ACTION3:"action3"}),r=cc.Enum({IDLE:"idle",STEP1:"step1",STEP2:"step2",STEP3:"step3",FINISH:"finish"});cc.Class({properties:{fsm:{default:null,type:i,serializable:!1,visible:!1}},ctor:function(){},load:function(){this.fsm=new i({init:r.IDLE,transitions:[{name:s.PLAY,from:r.IDLE,to:r.STEP1},{name:s.ACTION1,from:r.STEP1,to:r.STEP2},{name:s.ACTION2,from:r.STEP2,to:r.STEP3},{name:s.ACTION3,from:r.STEP3,to:r.FINISH}],methods:{onInvalidTransition:function(t,e,n){console.error("onInvalidTransition")},onPendingTransition:function(t,e,n){console.error("onPendingTransition")},onBeforeMelt:function(){return console.log("onEnter melted"),new Promise(function(t,e){setTimeout(function(){console.log("onEnter melted done"),e("abc")},200)})},onMelt:function(){console.log("I melted")},onFreeze:function(){console.log("I froze")},onVaporize:function(){console.log("I vaporized")},onCondense:function(){console.log("I condensed")}}}),console.log("before"+this.fsm.state);try{this.fsm.melt()}catch(t){console.log("catch day nef")}console.log("after"+this.fsm.state),setTimeout(function(){console.log("after1"+this.fsm.state),console.log(this.fsm.state)}.bind(this),500),setTimeout(function(){console.log("continue meltd"),this.fsm.melt(),console.log(this.fsm.state)}.bind(this),1e3),this.fsm.freeze(),console.log(this.fsm.state),console.log(o(this.fsm))}});cc._RF.pop()},{"state-machine":"state-machine","state-machine-visualize":"state-machine-visualize"}],PoolHandler:[function(t,e,n){"use strict";cc._RF.push(e,"2abece5O/9CH4bM2CUim0ve","PoolHandler");var i=0;function o(){var t=Date.now();if(t-i<300){this.stopAllActions();var e=this.getComponent("PoolHandler")._pool;e?e.put(this):this.removeFromParent(!0)}else this.paused?cc.director.getActionManager().resumeTarget(this):cc.director.getActionManager().pauseTarget(this),this.paused=!this.paused;i=t}var s=cc.Class({extends:cc.Component,properties:{_pool:null},onLoad:function(){this.reuse()},unuse:function(){this.node.off(cc.Node.EventType.TOUCH_END,o,this.node)},reuse:function(){this.node.paused=!1,this.node.on(cc.Node.EventType.TOUCH_END,o,this.node)}});e.exports=s,cc._RF.pop()},{}],Types:[function(t,e,n){"use strict";cc._RF.push(e,"b6265atsTFIyIyUEOexlFUc","Types");var i=["3","4","5","6","7","8","9","10","J","Q","K","A","2"],o=["\u2663","\u2660","\u2665","\u2666"];function s(t,e){Object.defineProperties(this,{point:{value:t,writable:!1},suit:{value:e,writable:!1},id:{value:13*e+t,writable:!1},pointName:{get:function(){return i[this.point]}},suitName:{get:function(){return o[this.suit]}},isBlackSuit:{get:function(){return 0===this.suit||1===this.suit}},isRedSuit:{get:function(){return 2===this.suit||3===this.suit}},isAce:{get:function(){return 11===this.point}},isFace:{get:function(){return this.point>=8&&this.point<=10}}})}s.prototype.toString=function(){return this.pointName+this.suitName};var r=new Array(52);s.fromId=function(t){return r[t]},s.from=function(t,e){return s.fromId(i.indexOf(t)+13*o.indexOf(e))},function(){for(var t=0;t<4;t++)for(var e=0;e<13;e++){var n=new s(e,t);r[n.id]=n}}(),e.exports={Rank:i,Suit:o,Card:s,Player:function(t,e,n,i,o){n=void 0===n?0:n,i=void 0===i?0:i,o=void 0===o?[]:o,Object.defineProperties(this,{index:{value:t,writable:!1},name:{value:e,writable:!1},gold:{writable:!0,value:n},avatar:{writable:!0,value:i},cards:{writable:!0,value:o}})},Table:function(t,e,n){Object.defineProperties(this,{id:{value:t,writable:!1},stake:{value:e,writable:!1},pot:{writable:!0,value:n}})}},cc._RF.pop()},{}],Utility:[function(t,e,n){"use strict";cc._RF.push(e,"03f42tN4dFFZ57ZmRNgSNMC","Utility");var i={units:[{prefix:"G",l:12,div:1e12},{prefix:"B",l:9,div:1e9},{prefix:"M",l:6,div:1e6},{prefix:"K",l:4,div:1e3},{prefix:"",l:3,div:1}],formatMoney:function(t,e,n){return void 0===e&&(e=""),e+i.formatAlignNumber(t,n)},formatMoneyFull:function(t,e,n){return void 0===e&&(e=""),e+i.formatAlignNumber(t,n,!0)},formatAlignNumber:function(t,e,n){if(void 0===t)return"0";t-=-.1,void 0===e&&(e=","),void 0===n&&(n=!1);var o=t<0,s=(t=Math.abs(Math.round(t))).toString();if(n)for(var r=s.length-3;r>0;)s=s.slice(0,r)+e+s.slice(r),r-=3;else for(var c=i.units,a=0,u=c.length;a<u;++a)if(s.length>c[a].l){var l=(t/c[a].div).toString().split("."),d=l[0].length>2?1:2;if(l[0].length>3)for(r=l[0].length-3;r>0;)l[0]=l[0].insertAt(r,e),r-=3;s=l[0],l.length>1&&(s+="."+l[1].substr(0,d)),s+=c[a].prefix;break}return o&&(s="-"+s),s},runUpdateGold:function(t,e,n,i,o,s,r,c){void 0===i&&(i=this.formatMoneyFull),void 0===e&&(e=0),void 0===n&&(n=0),t.string=i(1e4);var a=(n-e)/30;t.node.runAction(cc.sequence(cc.repeat(cc.sequence(cc.delayTime(.05),cc.callFunc(function(n){e=Math.floor(e+a),console.log("update new gold:"+e),t.string=i(e,c,r),o&&o(t,e)})),30),cc.callFunc(function(e){t.string=i(n,c,r),console.log("update tar gold:"+n),s&&s(t)})))}};e.exports=i,cc._RF.pop()},{}],"state-machine-history":[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"6bd92evp1ZJZ6xCHMU25nST","state-machine-history"),function(t,o){"object"===(void 0===n?"undefined":i(n))&&"object"===(void 0===e?"undefined":i(e))?e.exports=o():"function"==typeof define&&define.amd?define("StateMachineHistory",[],o):"object"===(void 0===n?"undefined":i(n))?n.StateMachineHistory=o():t.StateMachineHistory=o()}(void 0,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){function i(t){if(0===t.length)return t;var e,n,i=t.split(/[_-]/);if(1===i.length&&i[0][0].toLowerCase()===i[0][0])return t;for(n=i[0].toLowerCase(),e=1;e<i.length;e++)n=n+i[e].charAt(0).toUpperCase()+i[e].substring(1).toLowerCase();return n}i.prepended=function(t,e){return t+(e=i(e))[0].toUpperCase()+e.substring(1)},t.exports=i},function(t,e,n){var i=n(0);t.exports=function(t){var e=i((t=t||{}).name||t.past||"history"),n=i(t.future||"future"),o=i.prepended("clear",e),s=i.prepended(e,"back"),r=i.prepended(e,"forward"),c=i.prepended("can",s),a=i.prepended("can",r),u=t.max,l={configure:function(t){t.addTransitionLifecycleNames(s),t.addTransitionLifecycleNames(r)},init:function(t){t[e]=[],t[n]=[]},lifecycle:function(t,i){"onEnterState"===i.event&&(t[e].push(i.to),u&&t[e].length>u&&t[e].shift(),i.transition!==s&&i.transition!==r&&(t[n].length=0))},methods:{},properties:{}};return l.methods[o]=function(){this[e].length=0,this[n].length=0},l.properties[c]={get:function(){return this[e].length>1}},l.properties[a]={get:function(){return this[n].length>0}},l.methods[s]=function(){if(!this[c])throw Error("no history");var t=this[e].pop(),i=this[e].pop();this[n].push(t),this._fsm.transit(s,t,i,[])},l.methods[r]=function(){if(!this[a])throw Error("no history");var t=this.state,e=this[n].pop();this._fsm.transit(r,t,e,[])},l}}])}),cc._RF.pop()},{}],"state-machine-visualize":[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"4a309EP+LRF8YsSguHpvS/m","state-machine-visualize"),function(t,o){"object"===(void 0===n?"undefined":i(n))&&"object"===(void 0===e?"undefined":i(e))?e.exports=o():"function"==typeof define&&define.amd?define("StateMachineVisualize",[],o):"object"===(void 0===n?"undefined":i(n))?n.StateMachineVisualize=o():t.StateMachineVisualize=o()}(void 0,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){t.exports=function(t,e){var n,i,o;for(n=1;n<arguments.length;n++)for(o in i=arguments[n])i.hasOwnProperty(o)&&(t[o]=i[o]);return t}},function(t,e,n){var i=n(0);function o(t,e){return a(s(t,e))}function s(t,e){e=e||{};var n=s.fetch(t),i=e.name,o=s.rankdir(e.orientation),r=s.states(n,e),c=s.transitions(n,e),a={};return i&&(a.name=i),o&&(a.rankdir=o),r&&r.length>0&&(a.states=r),c&&c.length>0&&(a.transitions=c),a}function r(t){return" "+t+" "}function c(t){return'"'+t+'"'}function a(t){var e,n,i=(t=t||{}).name||"fsm",o=t.states||[],s=t.transitions||[],r=t.rankdir,u=[];for(u.push("digraph "+c(i)+" {"),r&&u.push("  rankdir="+r+";"),e=0,n=o.length;e<n;e++)u.push(a.state(o[e]));for(e=0,n=s.length;e<n;e++)u.push(a.edge(s[e]));return u.push("}"),u.join("\n")}s.fetch=function(t){return"function"==typeof t?t.prototype._fsm.config:t._fsm.config},s.rankdir=function(t){return"horizontal"===t?"LR":"vertical"===t?"TB":void 0},s.states=function(t,e){var n,i=t.states;return e.init||(n=i.indexOf(t.init.from),i=i.slice(0,n).concat(i.slice(n+1))),i},s.transitions=function(t,e){var n,i,o,r=t.init,c=t.options.transitions||[],a=[];for(e.init&&r.active&&s.transition(r.name,r.from,r.to,r.dot,t,e,a),n=0,i=c.length;n<i;n++)o=t.options.transitions[n],s.transition(o.name,o.from,o.to,o.dot,t,e,a);return a},s.transition=function(t,e,n,o,c,a,u){var l,d,f=c.defaults.wildcard;if(Array.isArray(e))for(l=0,d=e.length;l<d;l++)s.transition(t,e[l],n,o,c,a,u);else if(e===f||void 0===e)for(l=0,d=c.states.length;l<d;l++)s.transition(t,c.states[l],n,o,c,a,u);else n===f||void 0===n?s.transition(t,e,e,o,c,a,u):"function"==typeof n||u.push(i({},{from:e,to:n,label:r(t)},o||{}))},a.state=function(t){return"  "+c(t)+";"},a.edge=function(t){return"  "+c(t.from)+" -> "+c(t.to)+a.edge.attr(t)+";"},a.edge.attr=function(t){var e,n,i,o=Object.keys(t).sort(),s=[];for(e=0,n=o.length;e<n;e++)"from"!==(i=o[e])&&"to"!==i&&s.push(i+"="+c(t[i]));return s.length>0?" [ "+s.join(" ; ")+" ]":""},o.dotcfg=s,o.dotify=a,t.exports=o}])}),cc._RF.pop()},{}],"state-machine":[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"75189ssjqRPIJjNg8SblrCG","state-machine"),function(t,o){"object"===(void 0===n?"undefined":i(n))&&"object"===(void 0===e?"undefined":i(e))?e.exports=o():"function"==typeof define&&define.amd?define("StateMachine",[],o):"object"===(void 0===n?"undefined":i(n))?n.StateMachine=o():t.StateMachine=o()}(void 0,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){t.exports=function(t,e){var n,i,o;for(n=1;n<arguments.length;n++)for(o in i=arguments[n])i.hasOwnProperty(o)&&(t[o]=i[o]);return t}},function(t,e,n){var i=n(0);t.exports={build:function(t,e){var n,o,s,r=e.plugins;for(n=0,o=r.length;n<o;n++)(s=r[n]).methods&&i(t,s.methods),s.properties&&Object.defineProperties(t,s.properties)},hook:function(t,e,n){var i,o,s,r,c=t.config.plugins,a=[t.context];for(n&&(a=a.concat(n)),i=0,o=c.length;i<o;i++)r=c[i],(s=c[i][e])&&s.apply(r,a)}}},function(t,e,n){function i(t){if(0===t.length)return t;var e,n,i=t.split(/[_-]/);if(1===i.length&&i[0][0].toLowerCase()===i[0][0])return t;for(n=i[0].toLowerCase(),e=1;e<i.length;e++)n=n+i[e].charAt(0).toUpperCase()+i[e].substring(1).toLowerCase();return n}i.prepended=function(t,e){return t+(e=i(e))[0].toUpperCase()+e.substring(1)},t.exports=i},function(t,e,n){var o=n(0),s=n(2);function r(t,e){t=t||{},this.options=t,this.defaults=e.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(t.init),this.data=this.configureData(t.data),this.methods=this.configureMethods(t.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(t.transitions||[]),this.plugins=this.configurePlugins(t.plugins,e.plugin)}o(r.prototype,{addState:function(t){this.map[t]||(this.states.push(t),this.addStateLifecycleNames(t),this.map[t]={})},addStateLifecycleNames:function(t){this.lifecycle.onEnter[t]=s.prepended("onEnter",t),this.lifecycle.onLeave[t]=s.prepended("onLeave",t),this.lifecycle.on[t]=s.prepended("on",t)},addTransition:function(t){this.transitions.indexOf(t)<0&&(this.transitions.push(t),this.addTransitionLifecycleNames(t))},addTransitionLifecycleNames:function(t){this.lifecycle.onBefore[t]=s.prepended("onBefore",t),this.lifecycle.onAfter[t]=s.prepended("onAfter",t),this.lifecycle.on[t]=s.prepended("on",t)},mapTransition:function(t){var e=t.name,n=t.from,i=t.to;return this.addState(n),"function"!=typeof i&&this.addState(i),this.addTransition(e),this.map[n][e]=t,t},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(t){return"string"==typeof t?this.mapTransition(o({},this.defaults.init,{to:t,active:!0})):"object"===i(t)?this.mapTransition(o({},this.defaults.init,t,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(t){return"function"==typeof t?t:"object"===i(t)?function(){return t}:function(){return{}}},configureMethods:function(t){return t||{}},configurePlugins:function(t,e){var n,i,o;for(n=0,i=(t=t||[]).length;n<i;n++)"function"==typeof(o=t[n])&&(t[n]=o=o()),o.configure&&o.configure(this);return t},configureTransitions:function(t){var e,n,i,o,s,r=this.defaults.wildcard;for(n=0;n<t.length;n++)for(i=t[n],o=Array.isArray(i.from)?i.from:[i.from||r],s=i.to||r,e=0;e<o.length;e++)this.mapTransition({name:i.name,from:o[e],to:s})},transitionFor:function(t,e){var n=this.defaults.wildcard;return this.map[t][e]||this.map[n][e]},transitionsFor:function(t){var e=this.defaults.wildcard;return Object.keys(this.map[t]).concat(Object.keys(this.map[e]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),t.exports=r},function(t,e,n){var i=n(0),o=n(6),s=n(1),r=[null,[]];function c(t,e){this.context=t,this.config=e,this.state=e.init.from,this.observers=[t]}i(c.prototype,{init:function(t){if(i(this.context,this.config.data.apply(this.context,t)),s.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(t){return Array.isArray(t)?t.indexOf(this.state)>=0:this.state===t},isPending:function(){return this.pending},can:function(t){return!this.isPending()&&!!this.seek(t)},cannot:function(t){return!this.can(t)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(t,e){var n=this.config.defaults.wildcard,i=this.config.transitionFor(this.state,t),o=i&&i.to;return"function"==typeof o?o.apply(this.context,e):o===n?this.state:o},fire:function(t,e){return this.transit(t,this.state,this.seek(t,e),e)},transit:function(t,e,n,i){var o=this.config.lifecycle,s=this.config.options.observeUnchangedState||e!==n;return n?this.isPending()?this.context.onPendingTransition(t,e,n):(this.config.addState(n),this.beginTransit(),i.unshift({transition:t,from:e,to:n,fsm:this.context}),this.observeEvents([this.observersForEvent(o.onBefore.transition),this.observersForEvent(o.onBefore[t]),s?this.observersForEvent(o.onLeave.state):r,s?this.observersForEvent(o.onLeave[e]):r,this.observersForEvent(o.on.transition),s?["doTransit",[this]]:r,s?this.observersForEvent(o.onEnter.state):r,s?this.observersForEvent(o.onEnter[n]):r,s?this.observersForEvent(o.on[n]):r,this.observersForEvent(o.onAfter.transition),this.observersForEvent(o.onAfter[t]),this.observersForEvent(o.on[t])],i)):this.context.onInvalidTransition(t,e,n)},beginTransit:function(){this.pending=!0},endTransit:function(t){return this.pending=!1,t},failTransit:function(t){this.pending=!1},doTransit:function(t){this.state=t.to},observe:function(t){if(2===t.length){var e={};e[t[0]]=t[1],this.observers.push(e)}else this.observers.push(t[0])},observersForEvent:function(t){for(var e,n=0,i=this.observers.length,o=[];n<i;n++)(e=this.observers[n])[t]&&o.push(e);return[t,o,!0]},observeEvents:function(t,e,n,i){if(0===t.length)return this.endTransit(void 0===i||i);var o=t[0][0],r=t[0][1],c=t[0][2];if(e[0].event=o,o&&c&&o!==n&&s.hook(this,"lifecycle",e),0===r.length)return t.shift(),this.observeEvents(t,e,o,i);var a=r.shift(),u=a[o].apply(a,e);return u&&"function"==typeof u.then?u.then(this.observeEvents.bind(this,t,e,o)).catch(this.failTransit.bind(this)):!1===u?this.endTransit(!1):this.observeEvents(t,e,o,u)},onInvalidTransition:function(t,e,n){throw new o("transition is invalid in current state",t,e,n,this.state)},onPendingTransition:function(t,e,n){throw new o("transition is invalid while previous transition is still in progress",t,e,n,this.state)}}),t.exports=c},function(t,e,n){var o=n(0),s=n(2),r=n(1),c=n(3),a=n(4),u={is:function(t){return this._fsm.is(t)},can:function(t){return this._fsm.can(t)},cannot:function(t){return this._fsm.cannot(t)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(t,e,n){return this._fsm.onInvalidTransition(t,e,n)},onPendingTransition:function(t,e,n){return this._fsm.onPendingTransition(t,e,n)}},l={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(t){throw Error("use transitions to change state")}}};function d(t){return f(this||{},t)}function f(t,e){return h(t,new c(e,d)),t._fsm(),t}function h(t,e){if("object"!==i(t)||Array.isArray(t))throw Error("StateMachine can only be applied to objects");r.build(t,e),Object.defineProperties(t,l),o(t,u),o(t,e.methods),e.allTransitions().forEach(function(e){t[s(e)]=function(){return this._fsm.fire(e,[].slice.call(arguments))}}),t._fsm=function(){this._fsm=new a(this,e),this._fsm.init(arguments)}}d.version="3.0.1",d.factory=function(){var t,e;"function"==typeof arguments[0]?(t=arguments[0],e=arguments[1]||{}):(t=function(){this._fsm.apply(this,arguments)},e=arguments[0]||{});var n=new c(e,d);return h(t.prototype,n),t.prototype._fsm.config=n,t},d.apply=f,d.defaults={wildcard:"*",init:{name:"init",from:"none"}},t.exports=d},function(t,e,n){t.exports=function(t,e,n,i,o){this.message=t,this.transition=e,this.from=n,this.to=i,this.current=o}}])}),cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(t,e,n){"use strict";cc._RF.push(e,"fe3beTJ7JpC+onOsVF/3MEf","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["use_v2.0.x_cc.Toggle_event","Game","CAudio","CBtnDownload","CBtnStep1","CBtnStep2","CBtnStep3","CCHplay","CCard","CCircleAvatar","CCoinEffect","CCoinFallEffect","CEffectWin","CLayerGame","CPlayer","CProgressWaterAni","CSuggestGesture","CTable","CardUtils","CoinEffect","GameController","GameFake","PlayableAds","PlayableState","PoolHandler","Types","Utility","state-machine-history","state-machine-visualize","state-machine"]);