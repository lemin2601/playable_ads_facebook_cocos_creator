{"version":3,"sources":["assets\\scripts\\CTable.js"],"names":["require","Table","Card","Utility","cc","Class","Component","properties","lbPot","Label","lbId","lbStake","ctor","numCard","table","cards","onLoad","string","formatMoneyFull","pot","formatMoney","id","stake","console","error","start","setTable","getPositionCard","card","index","getPositionVia","num","y","startX","endX","maxOffsetX","offset","Vec2","setNumCard","number","onNewRound","l","length","i","runAction","sequence","delayTime","fadeOut","addCards","push"],"mappings":"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","sourceRoot":"/","sourcesContent":["var {Table,Card} = require(\"Types\");\r\nvar Utility = require(\"Utility\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        lbPot:cc.Label,\r\n        lbId:cc.Label,\r\n        lbStake:cc.Label\r\n    },\r\n    ctor:function(){\r\n        this.numCard = 0;\r\n        /** @type {Table}*/\r\n        this.table = null;\r\n        this.cards = [];\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        if(this.table){\r\n            this.lbPot.string = Utility.formatMoneyFull(this.table.pot);\r\n            this.lbId.string = \": \" + Utility.formatMoney(this.table.id);\r\n            this.lbStake.string = \": \" + Utility.formatMoney(this.table.stake);\r\n        }else{\r\n            console.error(\"need setTable before load\");\r\n        }\r\n    },\r\n\r\n    start () {\r\n        // Utility.runUpdateGold(this.lbPot,1000000,50000000);\r\n    },\r\n\r\n    setTable:function(table){\r\n        this.table = table;\r\n    },\r\n    /**\r\n     *\r\n     * @param card {CCard}\r\n     */\r\n    getPositionCard:function (card) {\r\n        var index = card.index;\r\n        return this.getPositionVia(index);\r\n    },\r\n    getPositionVia:function(index){\r\n        var num = this.numCard > 0 ? this.numCard : 1;\r\n        var y = 0;\r\n        var startX = - 250;\r\n        var endX = 250;\r\n        var maxOffsetX = 50;\r\n        var offset = (endX - startX) / (num - 1);\r\n        if(offset > maxOffsetX) offset = maxOffsetX;\r\n        //re-call startX;\r\n        startX = startX +  (endX - startX - (offset *(num - 1)))/2;\r\n        return new cc.Vec2(startX + (offset * index) - 73, y - 98);\r\n    },\r\n    setNumCard:function (number) {\r\n        this.numCard = number;\r\n    },\r\n    onNewRound:function () {\r\n        var l = this.cards.length;\r\n        for (var i = 0; i < l; i++) {\r\n            var card = this.cards[i];\r\n            card.runAction(cc.sequence(\r\n                cc.delayTime(1),\r\n                cc.fadeOut(0.5)\r\n            ))\r\n        }\r\n    },\r\n    addCards:function (cards) {\r\n        var l = cards.length;\r\n        for (var i = 0; i < l; i++) {\r\n            this.cards.push(cards[i]);\r\n        }\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}