{"version":3,"sources":["assets\\scripts\\component\\MyPlayer.js"],"names":["Card","require","Player","cc","Class","properties","numCard","type","Integer","start","setNumCard","getPositionCard","card","getPositionVia","index","isSelected","num","y","startX","endX","maxOffsetX","offset","Vec2","onTouchCard","event","Node","EventType","TOUCH_START","TOUCH_MOVE","isDraging","pos","node","convertToNodeSpaceAR","getLocation","setPosition","TOUCH_END","TOUCH_CANCEL","console","log","id"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\nlet Card = require(\"Card\");\r\nlet Player = require(\"Player\");\r\n\r\ncc.Class({\r\n    extends: cc.Player,\r\n\r\n    properties: {\r\n        numCard:{\r\n            default:0,\r\n            type:cc.Integer\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n\r\n    },\r\n    setNumCard:function(numCard){\r\n        this.numCard = numCard;\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param card\r\n     * @returns {*|cc.v2}\r\n     */\r\n    getPositionCard:function(card){\r\n        return this.getPositionVia(card.index,card.isSelected);\r\n    },\r\n    /**\r\n     *\r\n     * @param index\r\n     * @param isSelected\r\n     * @returns {cc.v2}\r\n     */\r\n    getPositionVia:function(index,isSelected){\r\n        let num = this.numCard > 0 ? this.numCard : 1;\r\n        let y = -300 + (isSelected?20:0);\r\n        let startX = - 250;\r\n        let endX = 250;\r\n        let maxOffsetX = 50;\r\n        let offset = (endX - startX) / (num - 1);\r\n        if(offset > maxOffsetX) offset = maxOffsetX;\r\n        //re-call startX;\r\n        startX = startX +  (endX - startX - (offset *(num - 1)))/2;\r\n        return new cc.Vec2(startX + (offset * index), y);\r\n    },\r\n    /**\r\n     *\r\n     * @param event {cc.EventTouch}\r\n     * @param card {Card}\r\n     */\r\n    onTouchCard:function (event,card) {\r\n        switch (event.type) {\r\n            case cc.Node.EventType.TOUCH_START:\r\n                break;\r\n            case cc.Node.EventType.TOUCH_MOVE:\r\n                card.isDraging = true;\r\n                var pos = this.node.convertToNodeSpaceAR(event.getLocation());\r\n                card.node.setPosition(pos);\r\n                break;\r\n            case cc.Node.EventType.TOUCH_END:\r\n                card.isDraging = false;\r\n                card.isSelected = !card.isSelected;\r\n                card.node.setPosition(this.getPositionCard(card));\r\n                break;\r\n            case cc.Node.EventType.TOUCH_CANCEL:\r\n                card.isDraging = false;\r\n                card.node.setPosition(this.getPositionCard(card));\r\n                break;\r\n        }\r\n        console.log(\"touch Card:\"+ event.type +\"|\" + card.id);\r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}