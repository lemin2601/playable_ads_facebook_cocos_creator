{"version":3,"sources":["assets\\scripts\\CCard.js"],"names":["require","Card","Rank","CCard","cc","Class","Component","properties","point","Label","suit","Sprite","mainPic","cardBG","redTextColor","Color","RED","blackTextColor","WHITE","texFrontBG","SpriteFrame","texFaces","type","texAce","texSuitBig","texSuitSmall","index","Integer","visible","isSelected","owner","Node","isDraging","card","setOwner","onLoad","init","node","on","EventType","TOUCH_START","onTouch","TOUCH_MOVE","TOUCH_END","TOUCH_CANCEL","onEmit","console","log","toString","event","customEvent","Event","EventCustom","setUserData","dispatchEvent","id","start","setCard","spriteFrame","isRedSuit","color","string","pointName","isAce","isFace","setPositionCenter","pos","setPosition","x","y"],"mappings":";;;;;;eAAkBA,OAAO,CAAC,OAAD;IAApBC,gBAAAA;IAAKC,gBAAAA,MACV;;AACA;;;;;AAGA,IAAIC,KAAK,GAAGC,EAAE,CAACC,KAAH,CAAS;AACjB,aAASD,EAAE,CAACE,SADK;AAGjBC,EAAAA,UAAU,EAAE;AACR;AACAC,IAAAA,KAAK,EAAKJ,EAAE,CAACK,KAFL;AAGRC,IAAAA,IAAI,EAAKN,EAAE,CAACO,MAHJ;AAIRC,IAAAA,OAAO,EAAER,EAAE,CAACO,MAJJ;AAKRE,IAAAA,MAAM,EAAGT,EAAE,CAACO,MALJ;AAOR;AACAG,IAAAA,YAAY,EAAIV,EAAE,CAACW,KAAH,CAASC,GARjB;AASRC,IAAAA,cAAc,EAAEb,EAAE,CAACW,KAAH,CAASG,KATjB;AAURC,IAAAA,UAAU,EAAMf,EAAE,CAACgB,WAVX;AAWR;AACAC,IAAAA,QAAQ,EAAM;AAAC;AACX,iBAAS,EADC;AAEVC,MAAAA,IAAI,EAAKlB,EAAE,CAACgB;AAFF,KAZN;AAgBRG,IAAAA,MAAM,EAAC;AACH,iBAAQ,EADL;AAEHD,MAAAA,IAAI,EAAClB,EAAE,CAACgB;AAFL,KAhBC;AAoBRI,IAAAA,UAAU,EAAI;AACV,iBAAS,EADC;AAEVF,MAAAA,IAAI,EAAKlB,EAAE,CAACgB;AAFF,KApBN;AAwBRK,IAAAA,YAAY,EAAE;AACV,iBAAS,EADC;AAEVH,MAAAA,IAAI,EAAKlB,EAAE,CAACgB;AAFF,KAxBN;AA4BRM,IAAAA,KAAK,EAAS;AAAC;AACX,iBAAS,CADC;AAEVJ,MAAAA,IAAI,EAAKlB,EAAE,CAACuB,OAFF;AAGVC,MAAAA,OAAO,EAAE;AAHC,KA5BN;AAiCRC,IAAAA,UAAU,EAAI;AAAE;AACZ,iBAAS,KADC;AAEVD,MAAAA,OAAO,EAAE;AAFC,KAjCN;AAqCRE,IAAAA,KAAK,EAAS;AAAC;AACX,iBAAS,IADC;AAEVR,MAAAA,IAAI,EAAKlB,EAAE,CAAC2B,IAFF;AAGVH,MAAAA,OAAO,EAAE;AAHC,KArCN;AA0CRI,IAAAA,SAAS,EAAK;AACV,iBAAS,IADC;AAEVJ,MAAAA,OAAO,EAAE;AAFC,KA1CN;AA8CRK,IAAAA,IAAI,EAAE;AACF,iBAAS,IADP;AAEFX,MAAAA,IAAI,EAAKrB,IAFP;AAGF2B,MAAAA,OAAO,EAAC;AAHN;AA9CE,GAHK;;AAwDjB;;;;AAIAM,EAAAA,QAAQ,EAAC,kBAASJ,KAAT,EAAe;AACpB,SAAKA,KAAL,GAAaA,KAAb;AACH,GA9DgB;AA+DjBK,EAAAA,MAAM,EAAC,kBAAU;AACb;AACA,QAAG,KAAKF,IAAR,EAAa;AACV,WAAKG,IAAL,CAAU,KAAKH,IAAf;AACF;;AACD,SAAKI,IAAL,CAAUC,EAAV,CAAalC,EAAE,CAAC2B,IAAH,CAAQQ,SAAR,CAAkBC,WAA/B,EAA4C,KAAKC,OAAjD,EAA0D,IAA1D;AACA,SAAKJ,IAAL,CAAUC,EAAV,CAAalC,EAAE,CAAC2B,IAAH,CAAQQ,SAAR,CAAkBG,UAA/B,EAA2C,KAAKD,OAAhD,EAAyD,IAAzD;AACA,SAAKJ,IAAL,CAAUC,EAAV,CAAalC,EAAE,CAAC2B,IAAH,CAAQQ,SAAR,CAAkBI,SAA/B,EAA0C,KAAKF,OAA/C,EAAwD,IAAxD;AACA,SAAKJ,IAAL,CAAUC,EAAV,CAAalC,EAAE,CAAC2B,IAAH,CAAQQ,SAAR,CAAkBK,YAA/B,EAA6C,KAAKH,OAAlD,EAA2D,IAA3D,EARa,CASb;AAEH,GA1EgB;AA2EjBI,EAAAA,MAAM,EAAC,kBAAU;AACbC,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAiB,KAAKd,IAAL,CAAUe,QAAV,EAA7B;AACH,GA7EgB;AA8EjBP,EAAAA,OAAO,EAAC,iBAASQ,KAAT,EAAe;AACnB,QAAG,KAAKnB,KAAR,EAAc;AACV,UAAIoB,WAAW,GAAG,IAAI9C,EAAE,CAAC+C,KAAH,CAASC,WAAb,CAAyB,YAAzB,EAAuC,IAAvC,CAAlB;AACAF,MAAAA,WAAW,CAACG,WAAZ,CAAwB;AACpBpB,QAAAA,IAAI,EAAC,IADe;AAEpBgB,QAAAA,KAAK,EAACA;AAFc,OAAxB;AAIA,WAAKZ,IAAL,CAAUiB,aAAV,CAAwBJ,WAAxB,EANU,CAOV;AACA;AACH,KATD,MASK;AACDJ,MAAAA,OAAO,CAACC,GAAR,CAAY,4BAA4B,KAAKQ,EAA7C;AACH;AACJ,GA3FgB;AA4FjBC,EAAAA,KAAK,EAAC,iBAAU;AACZ,SAAKnB,IAAL,CAAUiB,aAAV,CAAyB,IAAIlD,EAAE,CAAC+C,KAAH,CAASC,WAAb,CAAyB,WAAzB,EAAsC,IAAtC,CAAzB;AACH,GA9FgB;AA+FjBK,EAAAA,OAAO,EAAC,iBAASxB,IAAT,EAAc;AAClB;AACA,SAAKA,IAAL,GAAYA,IAAZ;AACH,GAlGgB;AAmGjB;AACAG,EAAAA,IAAI,EAAE,cAAUH,IAAV,EAAgB;AAClB;AACA,SAAKvB,IAAL,CAAUgD,WAAV,GAAwB,KAAKjC,YAAL,CAAkBQ,IAAI,CAACvB,IAAvB,CAAxB,CAFkB,CAIlB;;AACA,QAAIuB,IAAI,CAAC0B,SAAT,EAAoB;AAChB,WAAKnD,KAAL,CAAW6B,IAAX,CAAgBuB,KAAhB,GAAwB,KAAK9C,YAA7B;AACH,KAFD,MAEO;AACH,WAAKN,KAAL,CAAW6B,IAAX,CAAgBuB,KAAhB,GAAwB,KAAK3C,cAA7B;AACH;;AACD,SAAKT,KAAL,CAAWqD,MAAX,GAAoB5B,IAAI,CAAC6B,SAAzB,CAVkB,CAYlB;;AACA,QAAG7B,IAAI,CAAC8B,KAAR,EAAc;AACV,WAAKnD,OAAL,CAAa8C,WAAb,GAA2B,KAAKnC,MAAL,CAAYU,IAAI,CAACzB,KAAL,GAAa,CAAzB,CAA3B;AACH,KAFD,MAEM,IAAGyB,IAAI,CAAC+B,MAAR,EAAe;AACjB,WAAKpD,OAAL,CAAa8C,WAAb,GAA2B,KAAKrC,QAAL,CAAcY,IAAI,CAACzB,KAAL,GAAa,CAA3B,CAA3B;;AACA,UAAIyB,IAAI,CAAC0B,SAAT,EAAoB;AAChB,aAAK/C,OAAL,CAAayB,IAAb,CAAkBuB,KAAlB,GAA0B,KAAK9C,YAA/B;AACH,OAFD,MAEO;AACH,aAAKF,OAAL,CAAayB,IAAb,CAAkBuB,KAAlB,GAA0BxD,EAAE,CAACW,KAAH,CAASG,KAAnC;AACH;AACJ,KAPK,MAOD;AACD;AACA,WAAKN,OAAL,CAAa8C,WAAb,GAA2B,KAAKlC,UAAL,CAAgBS,IAAI,CAACvB,IAArB,CAA3B;AACH;AACJ,GA9HgB;AAgIjBuD,EAAAA,iBAAiB,EAAC,2BAAUC,GAAV,EAAe;AAC7B,SAAK7B,IAAL,CAAU8B,WAAV,CAAsBD,GAAG,CAACE,CAAJ,GAAQ,EAA9B,EAAiCF,GAAG,CAACG,CAAJ,GAAQ,EAAzC;AACH;AAlIgB,CAAT,CAAZ","sourceRoot":"/","sourcesContent":["var {Card,Rank} = require(\"Types\");\r\n// import {Card} from \"Types\";\r\n/**\r\n * @class CCard\r\n */\r\nvar CCard = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // nodes\r\n        point   : cc.Label,\r\n        suit   : cc.Sprite,\r\n        mainPic: cc.Sprite,\r\n        cardBG : cc.Sprite,\r\n\r\n        // resources\r\n        redTextColor  : cc.Color.RED,\r\n        blackTextColor: cc.Color.WHITE,\r\n        texFrontBG    : cc.SpriteFrame,\r\n        // texBackBG     : cc.SpriteFrame,\r\n        texFaces    : {//J,Q,K\r\n            default: [],\r\n            type   : cc.SpriteFrame\r\n        },\r\n        texAce:{\r\n            default:[],\r\n            type:cc.SpriteFrame\r\n        },\r\n        texSuitBig  : {\r\n            default: [],\r\n            type   : cc.SpriteFrame\r\n        },\r\n        texSuitSmall: {\r\n            default: [],\r\n            type   : cc.SpriteFrame\r\n        },\r\n        index       : {//vi tri trong group khi danh ra\r\n            default: 0,\r\n            type   : cc.Integer,\r\n            visible: false\r\n        },\r\n        isSelected  : { // trang thai co select khong\r\n            default: false,\r\n            visible: false\r\n        },\r\n        owner       : {//so huu quan bai, myPlayer hoac dock duoi table\r\n            default: null,\r\n            type   : cc.Node,\r\n            visible: false\r\n        },\r\n        isDraging   : {\r\n            default: true,\r\n            visible: false\r\n        },\r\n        card: {\r\n            default: null,\r\n            type   : Card,\r\n            visible:false\r\n        }\r\n    },\r\n\r\n    /**\r\n     * my player | dock\r\n     * @param owner {cc.Node}\r\n     */\r\n    setOwner:function(owner){\r\n        this.owner = owner;\r\n    },\r\n    onLoad:function(){\r\n        // console.log(\"loadCard:\" + this.card +\"|\" + this.index);\r\n        if(this.card){\r\n           this.init(this.card);\r\n        }\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onTouch, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouch, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_END, this.onTouch, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouch, this);\r\n        // this.node.on(\"cardtouch\",this.onEmit,this);\r\n\r\n    },\r\n    onEmit:function(){\r\n        console.log(\"onEmit card:\" + this.card.toString());\r\n    },\r\n    onTouch:function(event){\r\n        if(this.owner){\r\n            var customEvent = new cc.Event.EventCustom('card-touch', true);\r\n            customEvent.setUserData({\r\n                card:this,\r\n                event:event\r\n            });\r\n            this.node.dispatchEvent(customEvent);\r\n            // var cPlayer = this.owner.getComponent(\"CPlayer\");\r\n            // cPlayer.onTouchCard(event,this);\r\n        }else{\r\n            console.log(\"not found owner's card:\" + this.id);\r\n        }\r\n    },\r\n    start:function(){\r\n        this.node.dispatchEvent( new cc.Event.EventCustom('cardtouch', true) );\r\n    },\r\n    setCard:function(card){\r\n        // console.log(\"setCard:\" + card +\"|point:\" + card.point +\"|suit:\" + card.suit);\r\n        this.card = card;\r\n    },\r\n    // use this for initialization\r\n    init: function (card) {\r\n        //chat\r\n        this.suit.spriteFrame = this.texSuitSmall[card.suit];\r\n\r\n        //so\r\n        if (card.isRedSuit) {\r\n            this.point.node.color = this.redTextColor;\r\n        } else {\r\n            this.point.node.color = this.blackTextColor;\r\n        }\r\n        this.point.string = card.pointName;\r\n\r\n        //hinh\r\n        if(card.isAce){\r\n            this.mainPic.spriteFrame = this.texAce[card.point - 9];\r\n        }else if(card.isFace){\r\n            this.mainPic.spriteFrame = this.texFaces[card.point - 9];\r\n            if (card.isRedSuit) {\r\n                this.mainPic.node.color = this.redTextColor;\r\n            } else {\r\n                this.mainPic.node.color = cc.Color.WHITE;\r\n            }\r\n        }else{\r\n            //binh thuong 2->10\r\n            this.mainPic.spriteFrame = this.texSuitBig[card.suit];\r\n        }\r\n    },\r\n\r\n    setPositionCenter:function (pos) {\r\n        this.node.setPosition(pos.x - 50,pos.y - 65);\r\n    }\r\n});"]}