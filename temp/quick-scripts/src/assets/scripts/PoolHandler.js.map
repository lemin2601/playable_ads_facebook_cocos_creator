{"version":3,"sources":["assets\\scripts\\PoolHandler.js"],"names":["lastClick","pauseresume","now","Date","stopAllActions","pool","getComponent","_pool","put","removeFromParent","paused","cc","director","getActionManager","resumeTarget","pauseTarget","PoolHandler","Class","Component","properties","onLoad","reuse","unuse","node","off","Node","EventType","TOUCH_END","on","module","exports"],"mappings":";;;;;;AAAA,IAAIA,SAAS,GAAG,CAAhB;;AAEA,SAASC,WAAT,GAAwB;AACpB,MAAIC,GAAG,GAAGC,IAAI,CAACD,GAAL,EAAV,CADoB,CAEpB;;AACA,MAAIA,GAAG,GAAGF,SAAN,GAAkB,GAAtB,EAA2B;AACvB,SAAKI,cAAL;;AACA,QAAIC,IAAI,GAAG,KAAKC,YAAL,CAAkB,aAAlB,EAAiCC,KAA5C;;AACA,QAAIF,IAAJ,EAAU;AACNA,MAAAA,IAAI,CAACG,GAAL,CAAS,IAAT;AACH,KAFD,MAGK;AACD,WAAKC,gBAAL,CAAsB,IAAtB;AACH;AACJ,GATD,CAUA;AAVA,OAWK;AACD,UAAI,KAAKC,MAAT,EAAiB;AACbC,QAAAA,EAAE,CAACC,QAAH,CAAYC,gBAAZ,GAA+BC,YAA/B,CAA4C,IAA5C;AACH,OAFD,MAGK;AACDH,QAAAA,EAAE,CAACC,QAAH,CAAYC,gBAAZ,GAA+BE,WAA/B,CAA2C,IAA3C;AACH;;AACD,WAAKL,MAAL,GAAc,CAAC,KAAKA,MAApB;AACH;;AACDV,EAAAA,SAAS,GAAGE,GAAZ;AACH;;AAED,IAAIc,WAAW,GAAGL,EAAE,CAACM,KAAH,CAAS;AACvB,aAASN,EAAE,CAACO,SADW;AAGvBC,EAAAA,UAAU,EAAE;AACRZ,IAAAA,KAAK,EAAE;AADC,GAHW;AAOvBa,EAAAA,MAAM,EAAE,kBAAY;AAChB,SAAKC,KAAL;AACH,GATsB;AAWvBC,EAAAA,KAAK,EAAE,iBAAY;AACf,SAAKC,IAAL,CAAUC,GAAV,CAAcb,EAAE,CAACc,IAAH,CAAQC,SAAR,CAAkBC,SAAhC,EAA2C1B,WAA3C,EAAwD,KAAKsB,IAA7D;AACH,GAbsB;AAevBF,EAAAA,KAAK,EAAE,iBAAY;AACf,SAAKE,IAAL,CAAUb,MAAV,GAAmB,KAAnB;AACA,SAAKa,IAAL,CAAUK,EAAV,CAAajB,EAAE,CAACc,IAAH,CAAQC,SAAR,CAAkBC,SAA/B,EAA0C1B,WAA1C,EAAuD,KAAKsB,IAA5D;AACH;AAlBsB,CAAT,CAAlB;AAqBAM,MAAM,CAACC,OAAP,GAAiBd,WAAjB","sourceRoot":"/","sourcesContent":["var lastClick = 0;\r\n\r\nfunction pauseresume () {\r\n    var now = Date.now();\r\n    // Double click in 300 ms\r\n    if (now - lastClick < 300) {\r\n        this.stopAllActions();\r\n        var pool = this.getComponent('PoolHandler')._pool;\r\n        if (pool) {\r\n            pool.put(this);\r\n        }\r\n        else {\r\n            this.removeFromParent(true);\r\n        }\r\n    }\r\n    // Click\r\n    else {\r\n        if (this.paused) {\r\n            cc.director.getActionManager().resumeTarget(this);\r\n        }\r\n        else {\r\n            cc.director.getActionManager().pauseTarget(this);\r\n        }\r\n        this.paused = !this.paused;\r\n    }\r\n    lastClick = now;\r\n}\r\n\r\nvar PoolHandler = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _pool: null\r\n    },\r\n\r\n    onLoad: function () {\r\n        this.reuse();\r\n    },\r\n\r\n    unuse: function () {\r\n        this.node.off(cc.Node.EventType.TOUCH_END, pauseresume, this.node);\r\n    },\r\n\r\n    reuse: function () {\r\n        this.node.paused = false;\r\n        this.node.on(cc.Node.EventType.TOUCH_END, pauseresume, this.node);\r\n    }\r\n});\r\n\r\nmodule.exports = PoolHandler;"]}