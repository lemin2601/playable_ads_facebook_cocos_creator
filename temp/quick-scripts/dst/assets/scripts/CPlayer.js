
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/CPlayer.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'c90b5cwF5ZKgbNi6oY6LKVY', 'CPlayer');
// scripts/CPlayer.js

"use strict";

var Types = require("Types");

var Utility = require("Utility");

var CPlayer = cc.Class({
  "extends": cc.Component,
  properties: {
    avatar: cc.Node,
    displayName: cc.Label,
    gold: cc.Label,
    spriteAvatar: {
      "default": [],
      type: [cc.SpriteFrame]
    },
    layerCard: {
      "default": null,
      type: cc.Node
    },
    imgPass: {
      "default": null,
      type: cc.Node
    },
    progressBar: {
      "default": null,
      type: cc.ProgressBar
    },
    headProgressBar: {
      "default": null,
      type: cc.ParticleSystem
    },
    backCard: {
      "default": null,
      type: cc.Sprite
    },
    lbNumCard: {
      "default": null,
      type: cc.Label
    }
  },
  ctor: function ctor() {
    /** @type {Player}*/
    this.player = null;
    /** @type {GameController}*/

    this.gameController = null;
    /** @type {[cardPrefab]}*/

    this.cards = [];
    this._isMyTurn = false;
    this._numCard = 0;
  },
  onLoad: function onLoad() {
    this.setMyTurn(this._isMyTurn);

    if (this.player) {
      if (this.player.index === 0) {
        this.backCard.node.active = false;
      }

      this.displayName.string = this.player.name;
      this.gold.string = Utility.formatMoneyFull(this.player.gold); // var circleAvatar = this.avatar.getComponent("CCircleAvatar");
      // circleAvatar.changeAvatar(this.spriteAvatar[this.player.avatar]);
      //loadCards

      this._loadCards();
    } else {
      console.error("need load setPlayer info onLoad");
    }

    if (this.imgPass) {
      this.imgPass.active = false;
    }
  },
  start: function start() {},
  update: function update(dt) {
    if (this._isMyTurn) {
      var progressBar = this.progressBar;
      var progress = progressBar.progress;

      if (progress > 0) {
        progress -= dt * 0.1;
      }

      progressBar.progress = progress;
      var p = new cc.Vec2(0, 75);
      p = p.rotate(progress * 2 * 3.14);
      this.headProgressBar.node.setPosition(p);
    }
  },
  setGameController: function setGameController(gameController) {
    this.gameController = gameController;
  },
  setPlayer: function setPlayer(player) {
    this.player = player;

    if (this.player.index !== 0) {
      this._numCard = 11;
    }
  },
  updateUI: function updateUI() {},
  _loadCards: function _loadCards() {
    var midIndex = this.getNumCard() / 2;
    var midPos = this.getPositionVia(midIndex);
    var midRot = this.getRotationVia(midIndex);

    if (this.gameController) {
      var cards = this.player.cards;
      console.log("loadCards: " + this.player.index + "|" + JSON.stringify(cards));

      for (var i = 0; i < cards.length; i++) {
        var c = cards[i];
        cc.log(c.toString());
        var cardPrefab = this.gameController.getNewCard();
        var cCard = cardPrefab.getComponent("CCard");
        cCard.setCard(c);
        cCard.index = i;
        cCard.setOwner(this);
        var p = this.getPositionCard(cCard);
        var r = this.getRotationCard(cCard); // cardPrefab.setPosition(p);
        // cardPrefab.angle = (-r);

        cardPrefab.setPosition(midPos);
        cardPrefab.angle = -midRot;
        cardPrefab.runAction(cc.spawn(cc.moveTo(0.6, p.x, p.y), cc.rotateTo(0.6, r)));
        this.layerCard.addChild(cardPrefab);
        this.cards.push(cardPrefab);
      }

      this.lbNumCard.string = this.getNumCard();
    } else {
      console.error("don't have GameControler in Player, so can't create newCard");
    }
  },
  setLayerCard: function setLayerCard(layerCard) {
    this.layerCard = layerCard;
  },
  onDiscard: function onDiscard(cards) {
    this.setMyTurn(false);

    if (this.layerCard == null) {
      console.error("you need add layerCard to player beforeDiscard");
      return [];
    }

    var cardPrefabs = [];

    if (this.player && this.player.index === 0) {
      var isContain = function isContain(c) {
        for (var i = 0; i < cards.length; i++) {
          if (c.id === cards[i].id) {
            return true;
          }
        }

        return false;
      };

      var len = this.cards.length;

      for (var i = len - 1; i >= 0; i--) {
        var cardPrefab = this.cards[i];
        var cCard = cardPrefab.getComponent("CCard");

        if (isContain(cCard.card)) {
          cardPrefabs.unshift(cardPrefab);
          this.cards.splice(i, 1);
          this.player.cards.splice(i, 1);
        }
      }

      this._updatePosCards();
    } else {
      var pos = this.node.getPosition();
      pos.x += this.backCard.node.getPosition().x;

      for (var k = 0; k < cards.length; k++) {
        var cardPrefab = this.gameController.getNewCard();
        var cCard = cardPrefab.getComponent("CCard");
        cCard.setCard(cards[k]);
        cardPrefab.angle = 0;
        cCard.setPositionCenter(pos);
        cardPrefabs.push(cardPrefab);
        this.layerCard.addChild(cardPrefab);
      }

      this._numCard -= cards.length;
    }

    this.lbNumCard.string = this.getNumCard();
    return cardPrefabs;
  },
  _updatePosCards: function _updatePosCards() {
    console.log("_updatePosCards");
    var midIndex = this.getNumCard() / 2;
    var midPos = this.getPositionVia(midIndex);
    var midRot = this.getRotationVia(midIndex);

    if (this.gameController) {
      var cards = this.cards;

      for (var i = 0; i < cards.length; i++) {
        var cardPrefab = cards[i];
        var cCard = cardPrefab.getComponent("CCard");
        cCard.index = i;
        var p = this.getPositionCard(cCard);
        var r = this.getRotationCard(cCard); // cardPrefab.setPosition(p);
        // cardPrefab.angle = (-r);
        // cardPrefab.setPosition(midPos);
        // cardPrefab.angle = -midRot;

        cardPrefab.runAction(cc.spawn(cc.moveTo(0.2, p.x, p.y), cc.rotateTo(0.2, r)));
      }
    } else {
      console.error("don't have GameControler in Player, so can't create newCard");
    }
  },
  getNumCard: function getNumCard() {
    if (this.player) {
      if (this.player.index !== 0) {
        return this._numCard;
      }

      return this.player.cards.length;
    }

    return 1;
  },
  getRotationCard: function getRotationCard(cCard) {
    var index = cCard.index;
    return this.getRotationVia(index);
  },
  getRotationVia: function getRotationVia(index) {
    var num = this.getNumCard();
    if (num <= 1) return 0;
    var y = 0;
    var startX = -95;
    var endX = 75; // var startX = -60;
    // var endX = 48;

    var maxOffsetX = num < 7 ? 20 : 50;
    var offset = (endX - startX) / (num - 1);
    if (offset > maxOffsetX) offset = maxOffsetX; //re-call startX;

    startX = startX + (endX - startX - offset * (num - 1)) / 2;
    return startX + offset * index;
  },

  /**
   *
   * @param cCard {CCard}
   */
  getPositionCard: function getPositionCard(cCard) {
    var index = cCard.index;
    return this.getPositionVia(index);
  },
  getPositionVia: function getPositionVia(index) {
    var num = this.getNumCard();
    var y = 0;
    var startX = -250;
    var endX = 250;
    var maxOffsetX = 5;
    var offset = (endX - startX) / (num - 1);
    if (offset > maxOffsetX) offset = maxOffsetX; //re-call startX;

    startX = startX + (endX - startX - offset * (num - 1)) / 2;
    if (num <= 1) startX -= 60;
    return this.getCirclePos(new cc.Vec2(startX + offset * index, y));
  },

  /**
   *
   * @param pos {cc.Vec2}
   */
  getCirclePos: function getCirclePos(pos) {
    var x = pos.x;
    pos.y = -1 / 100 * (x * x) / 1000 - 440;
    return pos;
  },
  onPass: function onPass() {
    this.setMyTurn(false);

    if (this.imgPass) {
      this.imgPass.active = true;
      this.avatar.getComponent("CCircleAvatar").img.node.color = cc.Color.GRAY;
      this.node.runAction(cc.sequence(cc.delayTime(2), cc.callFunc(function () {
        this.imgPass.active = false;
        this.avatar.getComponent("CCircleAvatar").img.node.color = cc.Color.WHITE;
      }.bind(this))));
    }
  },

  /**
   *
   * @param event {cc.EventTouch}
   * @param card {Card}
   */
  onTouchCard: function onTouchCard(event, card, owner) {
    switch (event.type) {
      case cc.Node.EventType.TOUCH_START:
        break;

      case cc.Node.EventType.TOUCH_MOVE:
        card.isDraging = true;
        var pos = card.node.getParent().convertToNodeSpaceAR(event.getLocation());
        card.node.setPosition(pos);
        break;

      case cc.Node.EventType.TOUCH_END:
        card.isDraging = false;
        card.isSelected = !card.isSelected;
        card.node.setPosition(this.getPositionCard(card));
        break;

      case cc.Node.EventType.TOUCH_CANCEL:
        card.isDraging = false;
        card.node.setPosition(this.getPositionCard(card));
        break;
    }
  },
  onCloseTurn: function onCloseTurn() {
    cc.log("onCloseTurn:" + this.player.index);

    if (this.player.index === 0) {
      this.node.stopAllActions();
      this.node.runAction(cc.scaleTo(0.5, 1, 1)); // this.node.scale = 1;
    }
  },
  onEnterTurn: function onEnterTurn() {
    if (this.player.index === 0) {
      this.node.runAction(cc.scaleTo(0.5, 1.2, 1.2).easing(cc.easeBackOut())); // this.node.scale = 1.17;
      // return;
    }

    this.progressBar.progress = 1;
    this.setMyTurn(true);
  },
  setMyTurn: function setMyTurn(b) {
    this._isMyTurn = b;
    this.progressBar.node.active = b;
    var len = this.cards.length;

    for (var i = 0; i < len; i++) {
      var cardPrefab = this.cards[i];
      var cCard = cardPrefab.getComponent("CCard");
      cCard.setSuggest(true);
    }

    if (!b) {
      this.headProgressBar.stopSystem();
    } else {
      this.headProgressBar.resetSystem();
    } // this.headProgressBar.active = b;

  },
  onSuggestCard: function onSuggestCard(groups) {
    var isContain = function isContain(card) {
      var lg = groups.length;

      for (var i = 0; i < lg; i++) {
        var cards = groups[i];
        var l = cards.length;

        for (var j = 0; j < l; j++) {
          if (cards[j].id === card.id) {
            cc.log(cards[j] + "<>" + card);
            return true;
          }
        }
      }

      return false;
    };

    var len = this.cards.length;

    for (var i = 0; i < len; i++) {
      var cardPrefab = this.cards[i];
      var cCard = cardPrefab.getComponent("CCard");
      cCard.setSuggest(isContain(cCard.card));
    }
  },
  isContainAll: function isContainAll(cards) {
    var myCards = this.player.cards;

    for (var i = 0; i < cards.length; i++) {
      var card = cards[i];
      var isContain = false;

      for (var j = 0; j < myCards.length; j++) {
        cc.log("compare:" + myCards[j] + "|" + card);

        if (myCards[j].id === card.id) {
          isContain = true;
        }
      }

      cc.log("isContainAll:" + card + "|" + isContain);

      if (!isContain) {
        return false;
      }
    }

    return true;
  }
});
module.exports = CPlayer;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcQ1BsYXllci5qcyJdLCJuYW1lcyI6WyJUeXBlcyIsInJlcXVpcmUiLCJVdGlsaXR5IiwiQ1BsYXllciIsImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwiYXZhdGFyIiwiTm9kZSIsImRpc3BsYXlOYW1lIiwiTGFiZWwiLCJnb2xkIiwic3ByaXRlQXZhdGFyIiwidHlwZSIsIlNwcml0ZUZyYW1lIiwibGF5ZXJDYXJkIiwiaW1nUGFzcyIsInByb2dyZXNzQmFyIiwiUHJvZ3Jlc3NCYXIiLCJoZWFkUHJvZ3Jlc3NCYXIiLCJQYXJ0aWNsZVN5c3RlbSIsImJhY2tDYXJkIiwiU3ByaXRlIiwibGJOdW1DYXJkIiwiY3RvciIsInBsYXllciIsImdhbWVDb250cm9sbGVyIiwiY2FyZHMiLCJfaXNNeVR1cm4iLCJfbnVtQ2FyZCIsIm9uTG9hZCIsInNldE15VHVybiIsImluZGV4Iiwibm9kZSIsImFjdGl2ZSIsInN0cmluZyIsIm5hbWUiLCJmb3JtYXRNb25leUZ1bGwiLCJfbG9hZENhcmRzIiwiY29uc29sZSIsImVycm9yIiwic3RhcnQiLCJ1cGRhdGUiLCJkdCIsInByb2dyZXNzIiwicCIsIlZlYzIiLCJyb3RhdGUiLCJzZXRQb3NpdGlvbiIsInNldEdhbWVDb250cm9sbGVyIiwic2V0UGxheWVyIiwidXBkYXRlVUkiLCJtaWRJbmRleCIsImdldE51bUNhcmQiLCJtaWRQb3MiLCJnZXRQb3NpdGlvblZpYSIsIm1pZFJvdCIsImdldFJvdGF0aW9uVmlhIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsImkiLCJsZW5ndGgiLCJjIiwidG9TdHJpbmciLCJjYXJkUHJlZmFiIiwiZ2V0TmV3Q2FyZCIsImNDYXJkIiwiZ2V0Q29tcG9uZW50Iiwic2V0Q2FyZCIsInNldE93bmVyIiwiZ2V0UG9zaXRpb25DYXJkIiwiciIsImdldFJvdGF0aW9uQ2FyZCIsImFuZ2xlIiwicnVuQWN0aW9uIiwic3Bhd24iLCJtb3ZlVG8iLCJ4IiwieSIsInJvdGF0ZVRvIiwiYWRkQ2hpbGQiLCJwdXNoIiwic2V0TGF5ZXJDYXJkIiwib25EaXNjYXJkIiwiY2FyZFByZWZhYnMiLCJpc0NvbnRhaW4iLCJpZCIsImxlbiIsImNhcmQiLCJ1bnNoaWZ0Iiwic3BsaWNlIiwiX3VwZGF0ZVBvc0NhcmRzIiwicG9zIiwiZ2V0UG9zaXRpb24iLCJrIiwic2V0UG9zaXRpb25DZW50ZXIiLCJudW0iLCJzdGFydFgiLCJlbmRYIiwibWF4T2Zmc2V0WCIsIm9mZnNldCIsImdldENpcmNsZVBvcyIsIm9uUGFzcyIsImltZyIsImNvbG9yIiwiQ29sb3IiLCJHUkFZIiwic2VxdWVuY2UiLCJkZWxheVRpbWUiLCJjYWxsRnVuYyIsIldISVRFIiwiYmluZCIsIm9uVG91Y2hDYXJkIiwiZXZlbnQiLCJvd25lciIsIkV2ZW50VHlwZSIsIlRPVUNIX1NUQVJUIiwiVE9VQ0hfTU9WRSIsImlzRHJhZ2luZyIsImdldFBhcmVudCIsImNvbnZlcnRUb05vZGVTcGFjZUFSIiwiZ2V0TG9jYXRpb24iLCJUT1VDSF9FTkQiLCJpc1NlbGVjdGVkIiwiVE9VQ0hfQ0FOQ0VMIiwib25DbG9zZVR1cm4iLCJzdG9wQWxsQWN0aW9ucyIsInNjYWxlVG8iLCJvbkVudGVyVHVybiIsImVhc2luZyIsImVhc2VCYWNrT3V0IiwiYiIsInNldFN1Z2dlc3QiLCJzdG9wU3lzdGVtIiwicmVzZXRTeXN0ZW0iLCJvblN1Z2dlc3RDYXJkIiwiZ3JvdXBzIiwibGciLCJsIiwiaiIsImlzQ29udGFpbkFsbCIsIm15Q2FyZHMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLEtBQUssR0FBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBbkI7O0FBQ0EsSUFBSUMsT0FBTyxHQUFHRCxPQUFPLENBQUMsU0FBRCxDQUFyQjs7QUFFQSxJQUFJRSxPQUFPLEdBQUdDLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ25CLGFBQVNELEVBQUUsQ0FBQ0UsU0FETztBQUdu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U0FBSixFQUFjO0FBQ1YsZUFBTyxLQUFQO0FBQ0g7QUFDSjs7QUFFRCxXQUFPLElBQVA7QUFDSDtBQS9Ya0IsQ0FBVCxDQUFkO0FBa1lBeUQsTUFBTSxDQUFDQyxPQUFQLEdBQWlCOUksT0FBakIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBUeXBlcyA9IHJlcXVpcmUoXCJUeXBlc1wiKTtcclxudmFyIFV0aWxpdHkgPSByZXF1aXJlKFwiVXRpbGl0eVwiKTtcclxuXHJcbnZhciBDUGxheWVyID0gY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBhdmF0YXI6Y2MuTm9kZSxcclxuICAgICAgICBkaXNwbGF5TmFtZTpjYy5MYWJlbCxcclxuICAgICAgICBnb2xkOmNjLkxhYmVsLFxyXG4gICAgICAgIHNwcml0ZUF2YXRhcjp7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6W10sXHJcbiAgICAgICAgICAgIHR5cGU6W2NjLlNwcml0ZUZyYW1lXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGF5ZXJDYXJkOntcclxuICAgICAgICAgICAgZGVmYXVsdDpudWxsLFxyXG4gICAgICAgICAgICB0eXBlOmNjLk5vZGVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGltZ1Bhc3M6e1xyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6Y2MuTm9kZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHJvZ3Jlc3NCYXI6e1xyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6Y2MuUHJvZ3Jlc3NCYXJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGhlYWRQcm9ncmVzc0Jhcjp7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbCxcclxuICAgICAgICAgICAgdHlwZTpjYy5QYXJ0aWNsZVN5c3RlbVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYmFja0NhcmQ6e1xyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6Y2MuU3ByaXRlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYk51bUNhcmQ6e1xyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6Y2MuTGFiZWxcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgY3RvcjpmdW5jdGlvbigpe1xyXG4gICAgICAgIC8qKiBAdHlwZSB7UGxheWVyfSovXHJcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKiBAdHlwZSB7R2FtZUNvbnRyb2xsZXJ9Ki9cclxuICAgICAgICB0aGlzLmdhbWVDb250cm9sbGVyID0gbnVsbDtcclxuICAgICAgICAvKiogQHR5cGUge1tjYXJkUHJlZmFiXX0qL1xyXG4gICAgICAgIHRoaXMuY2FyZHMgPSBbXTtcclxuICAgICAgICB0aGlzLl9pc015VHVybiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX251bUNhcmQgPSAwO1xyXG4gICAgfSxcclxuICAgIG9uTG9hZDpmdW5jdGlvbigpe1xyXG4gICAgICAgIHRoaXMuc2V0TXlUdXJuKHRoaXMuX2lzTXlUdXJuKTtcclxuICAgICAgICBpZih0aGlzLnBsYXllcil7XHJcbiAgICAgICAgICAgIGlmKHRoaXMucGxheWVyLmluZGV4ID09PSAwKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFja0NhcmQubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlOYW1lLnN0cmluZyA9IHRoaXMucGxheWVyLm5hbWU7XHJcbiAgICAgICAgICAgIHRoaXMuZ29sZC5zdHJpbmcgPSBVdGlsaXR5LmZvcm1hdE1vbmV5RnVsbCh0aGlzLnBsYXllci5nb2xkKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHZhciBjaXJjbGVBdmF0YXIgPSB0aGlzLmF2YXRhci5nZXRDb21wb25lbnQoXCJDQ2lyY2xlQXZhdGFyXCIpO1xyXG4gICAgICAgICAgICAvLyBjaXJjbGVBdmF0YXIuY2hhbmdlQXZhdGFyKHRoaXMuc3ByaXRlQXZhdGFyW3RoaXMucGxheWVyLmF2YXRhcl0pO1xyXG5cclxuICAgICAgICAgICAgLy9sb2FkQ2FyZHNcclxuICAgICAgICAgICAgdGhpcy5fbG9hZENhcmRzKCk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJuZWVkIGxvYWQgc2V0UGxheWVyIGluZm8gb25Mb2FkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLmltZ1Bhc3Mpe1xyXG4gICAgICAgICAgICB0aGlzLmltZ1Bhc3MuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHN0YXJ0OmZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZSAoZHQpIHtcclxuICAgICAgICBpZih0aGlzLl9pc015VHVybil7XHJcbiAgICAgICAgICAgIHZhciBwcm9ncmVzc0JhciA9IHRoaXMucHJvZ3Jlc3NCYXI7XHJcbiAgICAgICAgICAgIHZhciBwcm9ncmVzcyA9IHByb2dyZXNzQmFyLnByb2dyZXNzO1xyXG4gICAgICAgICAgICBpZihwcm9ncmVzcyA+IDApe1xyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MgLT0gKGR0ICogMC4xKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwcm9ncmVzc0Jhci5wcm9ncmVzcyA9IHByb2dyZXNzO1xyXG5cclxuICAgICAgICAgICAgdmFyIHAgPSBuZXcgY2MuVmVjMigwLDc1KTtcclxuICAgICAgICAgICAgcCA9IHAucm90YXRlKHByb2dyZXNzICogMiAqIDMuMTQpO1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRQcm9ncmVzc0Jhci5ub2RlLnNldFBvc2l0aW9uKHApO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgc2V0R2FtZUNvbnRyb2xsZXI6ZnVuY3Rpb24oZ2FtZUNvbnRyb2xsZXIpe1xyXG4gICAgICAgIHRoaXMuZ2FtZUNvbnRyb2xsZXIgPSBnYW1lQ29udHJvbGxlcjtcclxuICAgIH0sXHJcbiAgICBzZXRQbGF5ZXI6ZnVuY3Rpb24gKHBsYXllcikge1xyXG4gICAgICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xyXG4gICAgICAgIGlmKHRoaXMucGxheWVyLmluZGV4ICE9PSAwKXtcclxuICAgICAgICAgICAgdGhpcy5fbnVtQ2FyZCA9IDExO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB1cGRhdGVVSTpmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuICAgIF9sb2FkQ2FyZHM6ZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBtaWRJbmRleCA9IHRoaXMuZ2V0TnVtQ2FyZCgpLzI7XHJcbiAgICAgICAgdmFyIG1pZFBvcyA9IHRoaXMuZ2V0UG9zaXRpb25WaWEobWlkSW5kZXgpO1xyXG4gICAgICAgIHZhciBtaWRSb3QgPSB0aGlzLmdldFJvdGF0aW9uVmlhKG1pZEluZGV4KTtcclxuICAgICAgICBpZih0aGlzLmdhbWVDb250cm9sbGVyKXtcclxuICAgICAgICAgICAgdmFyIGNhcmRzID0gdGhpcy5wbGF5ZXIuY2FyZHM7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibG9hZENhcmRzOiBcIiArIHRoaXMucGxheWVyLmluZGV4ICtcInxcIiArIEpTT04uc3RyaW5naWZ5KGNhcmRzKSk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2FyZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gY2FyZHNbaV07XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coYy50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIHZhciBjYXJkUHJlZmFiID0gdGhpcy5nYW1lQ29udHJvbGxlci5nZXROZXdDYXJkKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY0NhcmQgPSBjYXJkUHJlZmFiLmdldENvbXBvbmVudChcIkNDYXJkXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNDYXJkLnNldENhcmQoYyk7XHJcbiAgICAgICAgICAgICAgICBjQ2FyZC5pbmRleCA9IChpKTtcclxuICAgICAgICAgICAgICAgIGNDYXJkLnNldE93bmVyKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwID0gdGhpcy5nZXRQb3NpdGlvbkNhcmQoY0NhcmQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSB0aGlzLmdldFJvdGF0aW9uQ2FyZChjQ2FyZCk7XHJcbiAgICAgICAgICAgICAgICAvLyBjYXJkUHJlZmFiLnNldFBvc2l0aW9uKHApO1xyXG4gICAgICAgICAgICAgICAgLy8gY2FyZFByZWZhYi5hbmdsZSA9ICgtcik7XHJcbiAgICAgICAgICAgICAgICBjYXJkUHJlZmFiLnNldFBvc2l0aW9uKG1pZFBvcyk7XHJcbiAgICAgICAgICAgICAgICBjYXJkUHJlZmFiLmFuZ2xlID0gLW1pZFJvdDtcclxuICAgICAgICAgICAgICAgIGNhcmRQcmVmYWIucnVuQWN0aW9uKGNjLnNwYXduKFxyXG4gICAgICAgICAgICAgICAgICAgIGNjLm1vdmVUbygwLjYscC54LHAueSksXHJcbiAgICAgICAgICAgICAgICAgICAgY2Mucm90YXRlVG8oMC42LHIpXHJcbiAgICAgICAgICAgICAgICApKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGF5ZXJDYXJkLmFkZENoaWxkKGNhcmRQcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYXJkcy5wdXNoKGNhcmRQcmVmYWIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubGJOdW1DYXJkLnN0cmluZyA9IHRoaXMuZ2V0TnVtQ2FyZCgpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiZG9uJ3QgaGF2ZSBHYW1lQ29udHJvbGVyIGluIFBsYXllciwgc28gY2FuJ3QgY3JlYXRlIG5ld0NhcmRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNldExheWVyQ2FyZDpmdW5jdGlvbihsYXllckNhcmQpe1xyXG4gICAgICAgIHRoaXMubGF5ZXJDYXJkID0gbGF5ZXJDYXJkO1xyXG4gICAgfSxcclxuICAgIG9uRGlzY2FyZDpmdW5jdGlvbihjYXJkcyl7XHJcbiAgICAgICAgdGhpcy5zZXRNeVR1cm4oZmFsc2UpO1xyXG4gICAgICAgIGlmKHRoaXMubGF5ZXJDYXJkID09IG51bGwpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwieW91IG5lZWQgYWRkIGxheWVyQ2FyZCB0byBwbGF5ZXIgYmVmb3JlRGlzY2FyZFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY2FyZFByZWZhYnMgPSBbXTtcclxuICAgICAgICBpZih0aGlzLnBsYXllciAmJiB0aGlzLnBsYXllci5pbmRleCA9PT0gMCl7XHJcbiAgICAgICAgICAgIHZhciBpc0NvbnRhaW4gPSBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYXJkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGMuaWQ9PT0gY2FyZHNbaV0uaWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBsZW4gPSB0aGlzLmNhcmRzLmxlbmd0aDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGxlbiAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FyZFByZWZhYiA9IHRoaXMuY2FyZHNbaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgY0NhcmQgPSBjYXJkUHJlZmFiLmdldENvbXBvbmVudChcIkNDYXJkXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYoaXNDb250YWluKGNDYXJkLmNhcmQpKXtcclxuICAgICAgICAgICAgICAgICAgICBjYXJkUHJlZmFicy51bnNoaWZ0KGNhcmRQcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FyZHMuc3BsaWNlKGksMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuY2FyZHMuc3BsaWNlKGksMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUG9zQ2FyZHMoKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdmFyIHBvcyA9IHRoaXMubm9kZS5nZXRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICBwb3MueCArPSB0aGlzLmJhY2tDYXJkLm5vZGUuZ2V0UG9zaXRpb24oKS54O1xyXG4gICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNhcmRzLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FyZFByZWZhYiA9IHRoaXMuZ2FtZUNvbnRyb2xsZXIuZ2V0TmV3Q2FyZCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNDYXJkID0gY2FyZFByZWZhYi5nZXRDb21wb25lbnQoXCJDQ2FyZFwiKTtcclxuICAgICAgICAgICAgICAgIGNDYXJkLnNldENhcmQoY2FyZHNba10pO1xyXG4gICAgICAgICAgICAgICAgY2FyZFByZWZhYi5hbmdsZSA9IDA7XHJcbiAgICAgICAgICAgICAgICBjQ2FyZC5zZXRQb3NpdGlvbkNlbnRlcihwb3MpO1xyXG4gICAgICAgICAgICAgICAgY2FyZFByZWZhYnMucHVzaChjYXJkUHJlZmFiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGF5ZXJDYXJkLmFkZENoaWxkKGNhcmRQcmVmYWIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX251bUNhcmQgLT0gY2FyZHMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxiTnVtQ2FyZC5zdHJpbmcgPSB0aGlzLmdldE51bUNhcmQoKTtcclxuICAgICAgICByZXR1cm4gY2FyZFByZWZhYnM7XHJcbiAgICB9LFxyXG4gICAgX3VwZGF0ZVBvc0NhcmRzOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJfdXBkYXRlUG9zQ2FyZHNcIik7XHJcbiAgICAgICAgdmFyIG1pZEluZGV4ID0gdGhpcy5nZXROdW1DYXJkKCkvMjtcclxuICAgICAgICB2YXIgbWlkUG9zID0gdGhpcy5nZXRQb3NpdGlvblZpYShtaWRJbmRleCk7XHJcbiAgICAgICAgdmFyIG1pZFJvdCA9IHRoaXMuZ2V0Um90YXRpb25WaWEobWlkSW5kZXgpO1xyXG4gICAgICAgIGlmKHRoaXMuZ2FtZUNvbnRyb2xsZXIpe1xyXG4gICAgICAgICAgICB2YXIgY2FyZHMgPSB0aGlzLmNhcmRzO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhcmRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FyZFByZWZhYiA9IGNhcmRzW2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNDYXJkID0gY2FyZFByZWZhYi5nZXRDb21wb25lbnQoXCJDQ2FyZFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjQ2FyZC5pbmRleCA9IChpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IHRoaXMuZ2V0UG9zaXRpb25DYXJkKGNDYXJkKTtcclxuICAgICAgICAgICAgICAgIHZhciByID0gdGhpcy5nZXRSb3RhdGlvbkNhcmQoY0NhcmQpO1xyXG4gICAgICAgICAgICAgICAgLy8gY2FyZFByZWZhYi5zZXRQb3NpdGlvbihwKTtcclxuICAgICAgICAgICAgICAgIC8vIGNhcmRQcmVmYWIuYW5nbGUgPSAoLXIpO1xyXG4gICAgICAgICAgICAgICAgLy8gY2FyZFByZWZhYi5zZXRQb3NpdGlvbihtaWRQb3MpO1xyXG4gICAgICAgICAgICAgICAgLy8gY2FyZFByZWZhYi5hbmdsZSA9IC1taWRSb3Q7XHJcbiAgICAgICAgICAgICAgICBjYXJkUHJlZmFiLnJ1bkFjdGlvbihjYy5zcGF3bihcclxuICAgICAgICAgICAgICAgICAgICBjYy5tb3ZlVG8oMC4yLHAueCxwLnkpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNjLnJvdGF0ZVRvKDAuMixyKVxyXG4gICAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImRvbid0IGhhdmUgR2FtZUNvbnRyb2xlciBpbiBQbGF5ZXIsIHNvIGNhbid0IGNyZWF0ZSBuZXdDYXJkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgZ2V0TnVtQ2FyZDpmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKHRoaXMucGxheWVyKXtcclxuICAgICAgICAgICAgaWYodGhpcy5wbGF5ZXIuaW5kZXggIT09IDApe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX251bUNhcmQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGxheWVyLmNhcmRzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICB9LFxyXG4gICAgZ2V0Um90YXRpb25DYXJkOmZ1bmN0aW9uIChjQ2FyZCkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IGNDYXJkLmluZGV4O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFJvdGF0aW9uVmlhKGluZGV4KTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0Um90YXRpb25WaWE6ZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgICAgIHZhciBudW0gPSB0aGlzLmdldE51bUNhcmQoKTtcclxuICAgICAgICBpZihudW0gPD0xKSByZXR1cm4gMDtcclxuICAgICAgICB2YXIgeSA9IDA7XHJcbiAgICAgICAgdmFyIHN0YXJ0WCA9IC05NTtcclxuICAgICAgICB2YXIgZW5kWCA9IDc1O1xyXG4gICAgICAgIC8vIHZhciBzdGFydFggPSAtNjA7XHJcbiAgICAgICAgLy8gdmFyIGVuZFggPSA0ODtcclxuICAgICAgICB2YXIgbWF4T2Zmc2V0WCA9IG51bSA8IDcgPyAyMCA6IDUwO1xyXG4gICAgICAgIHZhciBvZmZzZXQgPSAoZW5kWCAtIHN0YXJ0WCkgLyAobnVtIC0gMSk7XHJcbiAgICAgICAgaWYob2Zmc2V0ID4gbWF4T2Zmc2V0WCkgb2Zmc2V0ID0gbWF4T2Zmc2V0WDtcclxuICAgICAgICAvL3JlLWNhbGwgc3RhcnRYO1xyXG4gICAgICAgIHN0YXJ0WCA9IHN0YXJ0WCArICAoZW5kWCAtIHN0YXJ0WCAtIChvZmZzZXQgKihudW0gLSAxKSkpLzI7XHJcbiAgICAgICAgcmV0dXJuIHN0YXJ0WCArIChvZmZzZXQgKiBpbmRleCk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNDYXJkIHtDQ2FyZH1cclxuICAgICAqL1xyXG4gICAgZ2V0UG9zaXRpb25DYXJkOmZ1bmN0aW9uIChjQ2FyZCl7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gY0NhcmQuaW5kZXg7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UG9zaXRpb25WaWEoaW5kZXgpO1xyXG4gICAgfSxcclxuICAgIGdldFBvc2l0aW9uVmlhOmZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICB2YXIgbnVtID0gdGhpcy5nZXROdW1DYXJkKCk7XHJcbiAgICAgICAgdmFyIHkgPSAwO1xyXG4gICAgICAgIHZhciBzdGFydFggPSAtIDI1MDtcclxuICAgICAgICB2YXIgZW5kWCA9IDI1MDtcclxuICAgICAgICB2YXIgbWF4T2Zmc2V0WCA9IDU7XHJcbiAgICAgICAgdmFyIG9mZnNldCA9IChlbmRYIC0gc3RhcnRYKSAvIChudW0gLSAxKTtcclxuICAgICAgICBpZihvZmZzZXQgPiBtYXhPZmZzZXRYKSBvZmZzZXQgPSBtYXhPZmZzZXRYO1xyXG4gICAgICAgIC8vcmUtY2FsbCBzdGFydFg7XHJcbiAgICAgICAgc3RhcnRYID0gc3RhcnRYICsgIChlbmRYIC0gc3RhcnRYIC0gKG9mZnNldCAqKG51bSAtIDEpKSkvMjtcclxuICAgICAgICBpZihudW0gPD0xKSBzdGFydFggLT0gNjA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2lyY2xlUG9zKG5ldyBjYy5WZWMyKHN0YXJ0WCArIChvZmZzZXQgKiBpbmRleCksIHkpKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcG9zIHtjYy5WZWMyfVxyXG4gICAgICovXHJcbiAgICBnZXRDaXJjbGVQb3M6ZnVuY3Rpb24gKHBvcykge1xyXG4gICAgICAgIHZhciB4ID0gcG9zLng7XHJcbiAgICAgICAgcG9zLnkgPSAoKC0xLzEwMCooeCp4KSkvMTAwMCAtIDQ0MCk7XHJcbiAgICAgICAgcmV0dXJuIHBvcztcclxuICAgIH0sXHJcbiAgICBvblBhc3M6ZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc2V0TXlUdXJuKGZhbHNlKTtcclxuICAgICAgICBpZih0aGlzLmltZ1Bhc3Mpe1xyXG4gICAgICAgICAgICB0aGlzLmltZ1Bhc3MuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5hdmF0YXIuZ2V0Q29tcG9uZW50KFwiQ0NpcmNsZUF2YXRhclwiKS5pbWcubm9kZS5jb2xvciA9IGNjLkNvbG9yLkdSQVk7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoXHJcbiAgICAgICAgICAgICAgICBjYy5kZWxheVRpbWUoMiksXHJcbiAgICAgICAgICAgICAgICBjYy5jYWxsRnVuYyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdQYXNzLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXZhdGFyLmdldENvbXBvbmVudChcIkNDaXJjbGVBdmF0YXJcIikuaW1nLm5vZGUuY29sb3IgPSBjYy5Db2xvci5XSElURTtcclxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSlcclxuICAgICAgICAgICAgKSlcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50IHtjYy5FdmVudFRvdWNofVxyXG4gICAgICogQHBhcmFtIGNhcmQge0NhcmR9XHJcbiAgICAgKi9cclxuICAgIG9uVG91Y2hDYXJkOmZ1bmN0aW9uIChldmVudCxjYXJkLG93bmVyKSB7XHJcbiAgICAgICAgc3dpdGNoIChldmVudC50eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9NT1ZFOlxyXG4gICAgICAgICAgICAgICAgY2FyZC5pc0RyYWdpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvcyA9IGNhcmQubm9kZS5nZXRQYXJlbnQoKS5jb252ZXJ0VG9Ob2RlU3BhY2VBUihldmVudC5nZXRMb2NhdGlvbigpKTtcclxuICAgICAgICAgICAgICAgIGNhcmQubm9kZS5zZXRQb3NpdGlvbihwb3MpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5EOlxyXG4gICAgICAgICAgICAgICAgY2FyZC5pc0RyYWdpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGNhcmQuaXNTZWxlY3RlZCA9ICFjYXJkLmlzU2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICBjYXJkLm5vZGUuc2V0UG9zaXRpb24odGhpcy5nZXRQb3NpdGlvbkNhcmQoY2FyZCkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfQ0FOQ0VMOlxyXG4gICAgICAgICAgICAgICAgY2FyZC5pc0RyYWdpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGNhcmQubm9kZS5zZXRQb3NpdGlvbih0aGlzLmdldFBvc2l0aW9uQ2FyZChjYXJkKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgb25DbG9zZVR1cm46ZnVuY3Rpb24oKXtcclxuICAgICAgICBjYy5sb2coXCJvbkNsb3NlVHVybjpcIiArIHRoaXMucGxheWVyLmluZGV4KTtcclxuICAgICAgICBpZih0aGlzLnBsYXllci5pbmRleCA9PT0gMCl7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5zdG9wQWxsQWN0aW9ucygpO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUucnVuQWN0aW9uKGNjLnNjYWxlVG8oMC41LDEsMSkpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLm5vZGUuc2NhbGUgPSAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICxcclxuICAgIG9uRW50ZXJUdXJuOmZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZih0aGlzLnBsYXllci5pbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUucnVuQWN0aW9uKGNjLnNjYWxlVG8oMC41LDEuMiwxLjIpLmVhc2luZyhjYy5lYXNlQmFja091dCgpKSk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMubm9kZS5zY2FsZSA9IDEuMTc7XHJcbiAgICAgICAgICAgIC8vIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wcm9ncmVzc0Jhci5wcm9ncmVzcyA9IDE7XHJcbiAgICAgICAgdGhpcy5zZXRNeVR1cm4odHJ1ZSk7XHJcbiAgICB9LFxyXG4gICAgc2V0TXlUdXJuOmZ1bmN0aW9uIChiKSB7XHJcbiAgICAgICAgdGhpcy5faXNNeVR1cm4gPSBiO1xyXG4gICAgICAgIHRoaXMucHJvZ3Jlc3NCYXIubm9kZS5hY3RpdmUgPSBiO1xyXG4gICAgICAgIHZhciBsZW4gPSB0aGlzLmNhcmRzLmxlbmd0aDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjYXJkUHJlZmFiID0gdGhpcy5jYXJkc1tpXTtcclxuICAgICAgICAgICAgdmFyIGNDYXJkID0gY2FyZFByZWZhYi5nZXRDb21wb25lbnQoXCJDQ2FyZFwiKTtcclxuICAgICAgICAgICAgY0NhcmQuc2V0U3VnZ2VzdCh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoIWIpe1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRQcm9ncmVzc0Jhci5zdG9wU3lzdGVtKCk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuaGVhZFByb2dyZXNzQmFyLnJlc2V0U3lzdGVtKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHRoaXMuaGVhZFByb2dyZXNzQmFyLmFjdGl2ZSA9IGI7XHJcbiAgICB9LFxyXG4gICAgb25TdWdnZXN0Q2FyZDpmdW5jdGlvbiAoZ3JvdXBzKSB7XHJcbiAgICAgICAgdmFyIGlzQ29udGFpbiA9IGZ1bmN0aW9uIChjYXJkKSB7XHJcbiAgICAgICAgICAgIHZhciBsZyA9IGdyb3Vwcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGc7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhcmRzID0gZ3JvdXBzW2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIGwgPSBjYXJkcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGw7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNhcmRzW2pdLmlkID09PSBjYXJkLmlkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9nKGNhcmRzW2pdICtcIjw+XCIgKyBjYXJkIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMuY2FyZHMubGVuZ3RoO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGNhcmRQcmVmYWIgPSB0aGlzLmNhcmRzW2ldO1xyXG4gICAgICAgICAgICB2YXIgY0NhcmQgPSBjYXJkUHJlZmFiLmdldENvbXBvbmVudChcIkNDYXJkXCIpO1xyXG4gICAgICAgICAgICBjQ2FyZC5zZXRTdWdnZXN0KGlzQ29udGFpbihjQ2FyZC5jYXJkKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGlzQ29udGFpbkFsbDpmdW5jdGlvbiAoY2FyZHMpIHtcclxuICAgICAgICB2YXIgbXlDYXJkcyA9IHRoaXMucGxheWVyLmNhcmRzO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2FyZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGNhcmQgPSBjYXJkc1tpXTtcclxuICAgICAgICAgICAgdmFyIGlzQ29udGFpbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG15Q2FyZHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcImNvbXBhcmU6XCIgKyBteUNhcmRzW2pdICtcInxcIiArIGNhcmQpO1xyXG4gICAgICAgICAgICAgICAgaWYobXlDYXJkc1tqXS5pZCA9PT0gY2FyZC5pZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNDb250YWluID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYy5sb2coXCJpc0NvbnRhaW5BbGw6XCIgKyBjYXJkICtcInxcIiArIGlzQ29udGFpbik7XHJcbiAgICAgICAgICAgIGlmKCFpc0NvbnRhaW4pe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIFxyXG59KTtcclxubW9kdWxlLmV4cG9ydHMgPSBDUGxheWVyO1xyXG4iXX0=