
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/CEffectWin.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'c3f96EHNXtD9KukPp20CQBY', 'CEffectWin');
// scripts/CEffectWin.js

"use strict";

var Utility = require("Utility");

cc.Class({
  "extends": cc.Component,
  properties: {
    spine: {
      "default": null,
      type: cc.Node
    },
    lbLose1: {
      "default": null,
      type: cc.Label
    },
    lbLose2: {
      "default": null,
      type: cc.Label
    },
    imgLose1: {
      "default": null,
      type: cc.Sprite
    },
    imgLose2: {
      "default": null,
      type: cc.Sprite
    },
    lbWin: {
      "default": null,
      type: cc.Label
    },
    lbPot: {
      "default": null,
      type: cc.Label
    },
    player1: {
      "default": null,
      type: cc.Node
    },
    player2: {
      "default": null,
      type: cc.Node
    },
    emotions: {
      "default": [],
      type: [cc.Node]
    }
  },
  ctor: function ctor() {
    this.gameController = null;
  },
  // onLoad () {},
  // start () {},
  // update (dt) {},
  onEnable: function onEnable() {
    this._playEffectX8();

    this._playEffectLabelGold();

    this._playAllEmotions();

    this._delayShowCHPlay();
  },
  showNodeCHPlay: function showNodeCHPlay() {
    this.gameController.showNodeCHPlay();
  },
  _playAllEmotions: function _playAllEmotions() {
    function playEmo(emo) {
      if (emo) {
        var spine = emo.getComponent('sp.Skeleton');
        spine.setCompleteListener(function (trackEntry) {
          emo.active = false;
        });
        setTimeout(function () {
          emo.active = true;
          spine.setAnimation(0, 'animation', false);
        }, 1000);
      }
    }

    var l = this.emotions.length;

    for (var i = 0; i < l; i++) {
      var emo = this.emotions[i];
      playEmo(emo);
    }
  },
  _playEffectX8: function _playEffectX8() {
    var emo = this.spine;
    var spine = emo.getComponent('sp.Skeleton');
    spine.clearTracks();
    spine.setCompleteListener(function (trackEntry) {// spine.clearTracks();
      // emo.active = false;
    });
    emo.active = true;
    spine.setAnimation(0, 'animation', false);
  },
  _playEffectLabelGold: function _playEffectLabelGold() {
    var lose1 = 47000000;
    var lose2 = 58000000;
    var pot = 40000000;
    var win = pot + lose1 + lose2;

    function hideLabelonDone(label) {
      label.node.active = false;
    }

    Utility.runUpdateGold(this.lbLose1, 0, -lose1, undefined, undefined, hideLabelonDone, undefined, "", "", "$");
    Utility.runUpdateGold(this.lbLose2, 0, -lose1, undefined, undefined, hideLabelonDone, undefined, "", "", "$");
    Utility.runUpdateGold(this.lbWin, 0, win, undefined, undefined, undefined, undefined, "", "+", "$"); // Utility.runUpdateGold(this.lbLose2,0,-lose2);
    // Utility.runUpdateGold(this.lbWin,0,win);

    Utility.runUpdateGold(this.player1.getComponent("CPlayer").gold, lose1, 0);
    Utility.runUpdateGold(this.player2.getComponent("CPlayer").gold, lose2, 0);
  },
  _delayShowCHPlay: function _delayShowCHPlay() {
    this.node.runAction(cc.sequence(cc.delayTime(4), cc.callFunc(function () {
      this.imgLose1.node.active = false;
      this.imgLose2.node.active = false;
      this.lbWin.node.active = false;
      this.showNodeCHPlay();
    }, this)));
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL0NFZmZlY3RXaW4uanMiXSwibmFtZXMiOlsiVXRpbGl0eSIsInJlcXVpcmUiLCJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsInNwaW5lIiwidHlwZSIsIk5vZGUiLCJsYkxvc2UxIiwiTGFiZWwiLCJsYkxvc2UyIiwiaW1nTG9zZTEiLCJTcHJpdGUiLCJpbWdMb3NlMiIsImxiV2luIiwibGJQb3QiLCJwbGF5ZXIxIiwicGxheWVyMiIsImVtb3Rpb25zIiwiY3RvciIsImdhbWVDb250cm9sbGVyIiwib25FbmFibGUiLCJfcGxheUVmZmVjdFg4IiwiX3BsYXlFZmZlY3RMYWJlbEdvbGQiLCJfcGxheUFsbEVtb3Rpb25zIiwiX2RlbGF5U2hvd0NIUGxheSIsInNob3dOb2RlQ0hQbGF5IiwicGxheUVtbyIsImVtbyIsImdldENvbXBvbmVudCIsInNldENvbXBsZXRlTGlzdGVuZXIiLCJ0cmFja0VudHJ5IiwiYWN0aXZlIiwic2V0VGltZW91dCIsInNldEFuaW1hdGlvbiIsImwiLCJsZW5ndGgiLCJpIiwiY2xlYXJUcmFja3MiLCJsb3NlMSIsImxvc2UyIiwicG90Iiwid2luIiwiaGlkZUxhYmVsb25Eb25lIiwibGFiZWwiLCJub2RlIiwicnVuVXBkYXRlR29sZCIsInVuZGVmaW5lZCIsImdvbGQiLCJydW5BY3Rpb24iLCJzZXF1ZW5jZSIsImRlbGF5VGltZSIsImNhbGxGdW5jIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBckI7O0FBQ0FDLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxTQURQO0FBR0xDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxLQUFLLEVBQUM7QUFDRixpQkFBUSxJQUROO0FBRUZDLE1BQUFBLElBQUksRUFBQ0wsRUFBRSxDQUFDTTtBQUZOLEtBREU7QUFLUkMsSUFBQUEsT0FBTyxFQUFDO0FBQ0osaUJBQVEsSUFESjtBQUVKRixNQUFBQSxJQUFJLEVBQUNMLEVBQUUsQ0FBQ1E7QUFGSixLQUxBO0FBU1JDLElBQUFBLE9BQU8sRUFBQztBQUNKLGlCQUFRLElBREo7QUFFSkosTUFBQUEsSUFBSSxFQUFDTCxFQUFFLENBQUNRO0FBRkosS0FUQTtBQWFSRSxJQUFBQSxRQUFRLEVBQUM7QUFDTCxpQkFBUSxJQURIO0FBRUxMLE1BQUFBLElBQUksRUFBQ0wsRUFBRSxDQUFDVztBQUZILEtBYkQ7QUFpQlJDLElBQUFBLFFBQVEsRUFBQztBQUNMLGlCQUFRLElBREg7QUFFTFAsTUFBQUEsSUFBSSxFQUFDTCxFQUFFLENBQUNXO0FBRkgsS0FqQkQ7QUFxQlJFLElBQUFBLEtBQUssRUFBQztBQUNGLGlCQUFRLElBRE47QUFFRlIsTUFBQUEsSUFBSSxFQUFDTCxFQUFFLENBQUNRO0FBRk4sS0FyQkU7QUF5QlJNLElBQUFBLEtBQUssRUFBQztBQUNGLGlCQUFRLElBRE47QUFFRlQsTUFBQUEsSUFBSSxFQUFDTCxFQUFFLENBQUNRO0FBRk4sS0F6QkU7QUE2QlJPLElBQUFBLE9BQU8sRUFBQztBQUNKLGlCQUFRLElBREo7QUFFSlYsTUFBQUEsSUFBSSxFQUFDTCxFQUFFLENBQUNNO0FBRkosS0E3QkE7QUFpQ1JVLElBQUFBLE9BQU8sRUFBQztBQUNKLGlCQUFRLElBREo7QUFFSlgsTUFBQUEsSUFBSSxFQUFDTCxFQUFFLENBQUNNO0FBRkosS0FqQ0E7QUFxQ1JXLElBQUFBLFFBQVEsRUFBQztBQUNMLGlCQUFRLEVBREg7QUFFTFosTUFBQUEsSUFBSSxFQUFDLENBQUNMLEVBQUUsQ0FBQ00sSUFBSjtBQUZBO0FBckNELEdBSFA7QUE4Q0xZLEVBQUFBLElBQUksRUFBQyxnQkFBVTtBQUNYLFNBQUtDLGNBQUwsR0FBc0IsSUFBdEI7QUFDSCxHQWhESTtBQWtETDtBQUNBO0FBQ0E7QUFFQUMsRUFBQUEsUUFBUSxFQUFDLG9CQUFVO0FBQ2YsU0FBS0MsYUFBTDs7QUFDQSxTQUFLQyxvQkFBTDs7QUFDQSxTQUFLQyxnQkFBTDs7QUFDQSxTQUFLQyxnQkFBTDtBQUNILEdBM0RJO0FBNkRMQyxFQUFBQSxjQUFjLEVBQUMsMEJBQVU7QUFDckIsU0FBS04sY0FBTCxDQUFvQk0sY0FBcEI7QUFDSCxHQS9ESTtBQWdFTEYsRUFBQUEsZ0JBQWdCLEVBQUMsNEJBQVU7QUFDdkIsYUFBU0csT0FBVCxDQUFpQkMsR0FBakIsRUFBc0I7QUFDbEIsVUFBR0EsR0FBSCxFQUFPO0FBQ0gsWUFBSXZCLEtBQUssR0FBR3VCLEdBQUcsQ0FBQ0MsWUFBSixDQUFpQixhQUFqQixDQUFaO0FBQTZDeEIsUUFBQUEsS0FBSyxDQUFDeUIsbUJBQU4sQ0FBMEIsVUFBU0MsVUFBVCxFQUFvQjtBQUN2RkgsVUFBQUEsR0FBRyxDQUFDSSxNQUFKLEdBQWEsS0FBYjtBQUNILFNBRjRDO0FBRzdDQyxRQUFBQSxVQUFVLENBQUMsWUFBWTtBQUNuQkwsVUFBQUEsR0FBRyxDQUFDSSxNQUFKLEdBQWEsSUFBYjtBQUNBM0IsVUFBQUEsS0FBSyxDQUFDNkIsWUFBTixDQUFtQixDQUFuQixFQUFzQixXQUF0QixFQUFtQyxLQUFuQztBQUNILFNBSFMsRUFHUixJQUhRLENBQVY7QUFJSDtBQUNKOztBQUNELFFBQUlDLENBQUMsR0FBRyxLQUFLakIsUUFBTCxDQUFja0IsTUFBdEI7O0FBQ0EsU0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHRixDQUFwQixFQUF1QkUsQ0FBQyxFQUF4QixFQUE0QjtBQUN4QixVQUFJVCxHQUFHLEdBQUcsS0FBS1YsUUFBTCxDQUFjbUIsQ0FBZCxDQUFWO0FBQ0FWLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBRCxDQUFQO0FBQ0g7QUFDSixHQWpGSTtBQWtGTE4sRUFBQUEsYUFBYSxFQUFFLHlCQUFZO0FBQ3ZCLFFBQUlNLEdBQUcsR0FBRyxLQUFLdkIsS0FBZjtBQUNBLFFBQUlBLEtBQUssR0FBR3VCLEdBQUcsQ0FBQ0MsWUFBSixDQUFpQixhQUFqQixDQUFaO0FBQ0F4QixJQUFBQSxLQUFLLENBQUNpQyxXQUFOO0FBQ0FqQyxJQUFBQSxLQUFLLENBQUN5QixtQkFBTixDQUEwQixVQUFTQyxVQUFULEVBQW9CLENBQzFDO0FBQ0E7QUFDSCxLQUhEO0FBSUFILElBQUFBLEdBQUcsQ0FBQ0ksTUFBSixHQUFhLElBQWI7QUFDQTNCLElBQUFBLEtBQUssQ0FBQzZCLFlBQU4sQ0FBbUIsQ0FBbkIsRUFBc0IsV0FBdEIsRUFBbUMsS0FBbkM7QUFDSCxHQTVGSTtBQTZGTFgsRUFBQUEsb0JBQW9CLEVBQUUsZ0NBQVk7QUFDOUIsUUFBSWdCLEtBQUssR0FBRyxRQUFaO0FBQ0EsUUFBSUMsS0FBSyxHQUFHLFFBQVo7QUFDQSxRQUFJQyxHQUFHLEdBQUcsUUFBVjtBQUNBLFFBQUlDLEdBQUcsR0FBR0QsR0FBRyxHQUFHRixLQUFOLEdBQWNDLEtBQXhCOztBQUNBLGFBQVNHLGVBQVQsQ0FBeUJDLEtBQXpCLEVBQStCO0FBQzNCQSxNQUFBQSxLQUFLLENBQUNDLElBQU4sQ0FBV2IsTUFBWCxHQUFvQixLQUFwQjtBQUNIOztBQUNEakMsSUFBQUEsT0FBTyxDQUFDK0MsYUFBUixDQUFzQixLQUFLdEMsT0FBM0IsRUFBb0MsQ0FBcEMsRUFBdUMsQ0FBQytCLEtBQXhDLEVBQStDUSxTQUEvQyxFQUEwREEsU0FBMUQsRUFBcUVKLGVBQXJFLEVBQXNGSSxTQUF0RixFQUFpRyxFQUFqRyxFQUFxRyxFQUFyRyxFQUF3RyxHQUF4RztBQUNBaEQsSUFBQUEsT0FBTyxDQUFDK0MsYUFBUixDQUFzQixLQUFLcEMsT0FBM0IsRUFBb0MsQ0FBcEMsRUFBdUMsQ0FBQzZCLEtBQXhDLEVBQStDUSxTQUEvQyxFQUEwREEsU0FBMUQsRUFBcUVKLGVBQXJFLEVBQXNGSSxTQUF0RixFQUFpRyxFQUFqRyxFQUFxRyxFQUFyRyxFQUF3RyxHQUF4RztBQUNBaEQsSUFBQUEsT0FBTyxDQUFDK0MsYUFBUixDQUFzQixLQUFLaEMsS0FBM0IsRUFBa0MsQ0FBbEMsRUFBcUM0QixHQUFyQyxFQUEwQ0ssU0FBMUMsRUFBcURBLFNBQXJELEVBQWdFQSxTQUFoRSxFQUEyRUEsU0FBM0UsRUFBc0YsRUFBdEYsRUFBMEYsR0FBMUYsRUFBOEYsR0FBOUYsRUFWOEIsQ0FXOUI7QUFDQTs7QUFDQWhELElBQUFBLE9BQU8sQ0FBQytDLGFBQVIsQ0FBc0IsS0FBSzlCLE9BQUwsQ0FBYWEsWUFBYixDQUEwQixTQUExQixFQUFxQ21CLElBQTNELEVBQWdFVCxLQUFoRSxFQUFzRSxDQUF0RTtBQUNBeEMsSUFBQUEsT0FBTyxDQUFDK0MsYUFBUixDQUFzQixLQUFLN0IsT0FBTCxDQUFhWSxZQUFiLENBQTBCLFNBQTFCLEVBQXFDbUIsSUFBM0QsRUFBZ0VSLEtBQWhFLEVBQXNFLENBQXRFO0FBQ0gsR0E1R0k7QUE2R0xmLEVBQUFBLGdCQUFnQixFQUFFLDRCQUFZO0FBQzFCLFNBQUtvQixJQUFMLENBQVVJLFNBQVYsQ0FBb0JoRCxFQUFFLENBQUNpRCxRQUFILENBQ2hCakQsRUFBRSxDQUFDa0QsU0FBSCxDQUFhLENBQWIsQ0FEZ0IsRUFFaEJsRCxFQUFFLENBQUNtRCxRQUFILENBQVksWUFBWTtBQUNwQixXQUFLekMsUUFBTCxDQUFja0MsSUFBZCxDQUFtQmIsTUFBbkIsR0FBNEIsS0FBNUI7QUFDQSxXQUFLbkIsUUFBTCxDQUFjZ0MsSUFBZCxDQUFtQmIsTUFBbkIsR0FBNEIsS0FBNUI7QUFDQSxXQUFLbEIsS0FBTCxDQUFXK0IsSUFBWCxDQUFnQmIsTUFBaEIsR0FBeUIsS0FBekI7QUFDQSxXQUFLTixjQUFMO0FBQ0gsS0FMRCxFQUtFLElBTEYsQ0FGZ0IsQ0FBcEI7QUFTSDtBQXZISSxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgVXRpbGl0eSA9IHJlcXVpcmUoXCJVdGlsaXR5XCIpO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHNwaW5lOntcclxuICAgICAgICAgICAgZGVmYXVsdDpudWxsLFxyXG4gICAgICAgICAgICB0eXBlOmNjLk5vZGVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxiTG9zZTE6e1xyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6Y2MuTGFiZWxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxiTG9zZTI6e1xyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6Y2MuTGFiZWxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGltZ0xvc2UxOntcclxuICAgICAgICAgICAgZGVmYXVsdDpudWxsLFxyXG4gICAgICAgICAgICB0eXBlOmNjLlNwcml0ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW1nTG9zZTI6e1xyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6Y2MuU3ByaXRlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYldpbjp7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbCxcclxuICAgICAgICAgICAgdHlwZTpjYy5MYWJlbFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGJQb3Q6e1xyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6Y2MuTGFiZWxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBsYXllcjE6e1xyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6Y2MuTm9kZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcGxheWVyMjp7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbCxcclxuICAgICAgICAgICAgdHlwZTpjYy5Ob2RlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbW90aW9uczp7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6W10sXHJcbiAgICAgICAgICAgIHR5cGU6W2NjLk5vZGVdXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBjdG9yOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdGhpcy5nYW1lQ29udHJvbGxlciA9IG51bGw7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIG9uTG9hZCAoKSB7fSxcclxuICAgIC8vIHN0YXJ0ICgpIHt9LFxyXG4gICAgLy8gdXBkYXRlIChkdCkge30sXHJcblxyXG4gICAgb25FbmFibGU6ZnVuY3Rpb24oKXtcclxuICAgICAgICB0aGlzLl9wbGF5RWZmZWN0WDgoKTtcclxuICAgICAgICB0aGlzLl9wbGF5RWZmZWN0TGFiZWxHb2xkKCk7XHJcbiAgICAgICAgdGhpcy5fcGxheUFsbEVtb3Rpb25zKCk7XHJcbiAgICAgICAgdGhpcy5fZGVsYXlTaG93Q0hQbGF5KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNob3dOb2RlQ0hQbGF5OmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdGhpcy5nYW1lQ29udHJvbGxlci5zaG93Tm9kZUNIUGxheSgpO1xyXG4gICAgfSxcclxuICAgIF9wbGF5QWxsRW1vdGlvbnM6ZnVuY3Rpb24oKXtcclxuICAgICAgICBmdW5jdGlvbiBwbGF5RW1vKGVtbykge1xyXG4gICAgICAgICAgICBpZihlbW8pe1xyXG4gICAgICAgICAgICAgICAgdmFyIHNwaW5lID0gZW1vLmdldENvbXBvbmVudCgnc3AuU2tlbGV0b24nKTsgc3BpbmUuc2V0Q29tcGxldGVMaXN0ZW5lcihmdW5jdGlvbih0cmFja0VudHJ5KXtcclxuICAgICAgICAgICAgICAgICAgICBlbW8uYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtby5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHNwaW5lLnNldEFuaW1hdGlvbigwLCAnYW5pbWF0aW9uJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSwxMDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbCA9IHRoaXMuZW1vdGlvbnMubGVuZ3RoO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBlbW8gPSB0aGlzLmVtb3Rpb25zW2ldO1xyXG4gICAgICAgICAgICBwbGF5RW1vKGVtbyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIF9wbGF5RWZmZWN0WDg6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZW1vID0gdGhpcy5zcGluZTtcclxuICAgICAgICB2YXIgc3BpbmUgPSBlbW8uZ2V0Q29tcG9uZW50KCdzcC5Ta2VsZXRvbicpO1xyXG4gICAgICAgIHNwaW5lLmNsZWFyVHJhY2tzKCk7XHJcbiAgICAgICAgc3BpbmUuc2V0Q29tcGxldGVMaXN0ZW5lcihmdW5jdGlvbih0cmFja0VudHJ5KXtcclxuICAgICAgICAgICAgLy8gc3BpbmUuY2xlYXJUcmFja3MoKTtcclxuICAgICAgICAgICAgLy8gZW1vLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVtby5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHNwaW5lLnNldEFuaW1hdGlvbigwLCAnYW5pbWF0aW9uJywgZmFsc2UpO1xyXG4gICAgfSxcclxuICAgIF9wbGF5RWZmZWN0TGFiZWxHb2xkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGxvc2UxID0gNDcwMDAwMDA7XHJcbiAgICAgICAgdmFyIGxvc2UyID0gNTgwMDAwMDA7XHJcbiAgICAgICAgdmFyIHBvdCA9IDQwMDAwMDAwO1xyXG4gICAgICAgIHZhciB3aW4gPSBwb3QgKyBsb3NlMSArIGxvc2UyO1xyXG4gICAgICAgIGZ1bmN0aW9uIGhpZGVMYWJlbG9uRG9uZShsYWJlbCl7XHJcbiAgICAgICAgICAgIGxhYmVsLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFV0aWxpdHkucnVuVXBkYXRlR29sZCh0aGlzLmxiTG9zZTEsIDAsIC1sb3NlMSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGhpZGVMYWJlbG9uRG9uZSwgdW5kZWZpbmVkLCBcIlwiLCBcIlwiLFwiJFwiKTtcclxuICAgICAgICBVdGlsaXR5LnJ1blVwZGF0ZUdvbGQodGhpcy5sYkxvc2UyLCAwLCAtbG9zZTEsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBoaWRlTGFiZWxvbkRvbmUsIHVuZGVmaW5lZCwgXCJcIiwgXCJcIixcIiRcIik7XHJcbiAgICAgICAgVXRpbGl0eS5ydW5VcGRhdGVHb2xkKHRoaXMubGJXaW4sIDAsIHdpbiwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBcIlwiLCBcIitcIixcIiRcIik7XHJcbiAgICAgICAgLy8gVXRpbGl0eS5ydW5VcGRhdGVHb2xkKHRoaXMubGJMb3NlMiwwLC1sb3NlMik7XHJcbiAgICAgICAgLy8gVXRpbGl0eS5ydW5VcGRhdGVHb2xkKHRoaXMubGJXaW4sMCx3aW4pO1xyXG4gICAgICAgIFV0aWxpdHkucnVuVXBkYXRlR29sZCh0aGlzLnBsYXllcjEuZ2V0Q29tcG9uZW50KFwiQ1BsYXllclwiKS5nb2xkLGxvc2UxLDApO1xyXG4gICAgICAgIFV0aWxpdHkucnVuVXBkYXRlR29sZCh0aGlzLnBsYXllcjIuZ2V0Q29tcG9uZW50KFwiQ1BsYXllclwiKS5nb2xkLGxvc2UyLDApO1xyXG4gICAgfSxcclxuICAgIF9kZWxheVNob3dDSFBsYXk6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm5vZGUucnVuQWN0aW9uKGNjLnNlcXVlbmNlKFxyXG4gICAgICAgICAgICBjYy5kZWxheVRpbWUoNCksXHJcbiAgICAgICAgICAgIGNjLmNhbGxGdW5jKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1nTG9zZTEubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1nTG9zZTIubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGJXaW4ubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd05vZGVDSFBsYXkoKTtcclxuICAgICAgICAgICAgfSx0aGlzKVxyXG4gICAgICAgICkpO1xyXG4gICAgfVxyXG59KTtcclxuIl19